(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,354851,570126,t=>{"use strict";t.s(["clear",()=>tD,"clear2",()=>e3,"createLabel_default",()=>td,"insertCluster",()=>tS,"insertNode",()=>e1,"isLabelStyle",()=>ty,"isValidShape",()=>e0,"labelHelper",()=>te,"positionNode",()=>e4,"setNodeElem",()=>e5,"updateNodeBounds",()=>tl],354851);var e,a=t.i(642585),l=t.i(879521),n=t.i(691926),i=t.i(244196),r=t.i(372534);t.i(991577);var s=t.i(692423);function o(t,e,a){if(t&&t.length){let[l,n]=e,i=Math.PI/180*a,r=Math.cos(i),s=Math.sin(i);for(let e of t){let[t,a]=e;e[0]=(t-l)*r-(a-n)*s+l,e[1]=(t-l)*s+(a-n)*r+n}}}function h(t,e){var a;let l=e.hachureAngle+90,n=e.hachureGap;n<0&&(n=4*e.strokeWidth),n=Math.round(Math.max(n,.1));let i=1;return e.roughness>=1&&((null==(a=e.randomizer)?void 0:a.next())||Math.random())>.7&&(i=n),function(t,e,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=Math.max(e,.1),i=t[0]&&t[0][0]&&"number"==typeof t[0][0]?[t]:t,r=[0,0];if(a)for(let t of i)o(t,r,a);let s=function(t,e,a){let l=[];for(let e of t){var n,i;let t=[...e];n=t[0],i=t[t.length-1],n[0]===i[0]&&n[1]===i[1]||t.push([t[0][0],t[0][1]]),t.length>2&&l.push(t)}let r=[];e=Math.max(e,.1);let s=[];for(let t of l)for(let e=0;e<t.length-1;e++){let a=t[e],l=t[e+1];if(a[1]!==l[1]){let t=Math.min(a[1],l[1]);s.push({ymin:t,ymax:Math.max(a[1],l[1]),x:t===a[1]?a[0]:l[0],islope:(l[0]-a[0])/(l[1]-a[1])})}}if(s.sort((t,e)=>t.ymin<e.ymin?-1:t.ymin>e.ymin?1:t.x<e.x?-1:t.x>e.x?1:t.ymax===e.ymax?0:(t.ymax-e.ymax)/Math.abs(t.ymax-e.ymax)),!s.length)return r;let o=[],h=s[0].ymin,c=0;for(;o.length||s.length;){if(s.length){let t=-1;for(let e=0;e<s.length&&!(s[e].ymin>h);e++)t=e;s.splice(0,t+1).forEach(t=>{o.push({s:h,edge:t})})}if((o=o.filter(t=>!(t.edge.ymax<=h))).sort((t,e)=>t.edge.x===e.edge.x?0:(t.edge.x-e.edge.x)/Math.abs(t.edge.x-e.edge.x)),(1!==a||c%e==0)&&o.length>1)for(let t=0;t<o.length;t+=2){let e=t+1;if(e>=o.length)break;let a=o[t].edge,l=o[e].edge;r.push([[Math.round(a.x),h],[Math.round(l.x),h]])}h+=a,o.forEach(t=>{t.edge.x=t.edge.x+a*t.edge.islope}),c++}return r}(i,n,l);if(a){for(let t of i)o(t,r,-a);let t=[];s.forEach(e=>t.push(...e)),o(t,r,-a)}return s}(t,n,l,i||1)}t.s(["default",()=>tt],570126);class c{fillPolygons(t,e){return this._fillPolygons(t,e)}_fillPolygons(t,e){let a=h(t,e);return{type:"fillSketch",ops:this.renderLines(a,e)}}renderLines(t,e){let a=[];for(let l of t)a.push(...this.helper.doubleLineOps(l[0][0],l[0][1],l[1][0],l[1][1],e));return a}constructor(t){this.helper=t}}function d(t){let e=t[0],a=t[1];return Math.sqrt(Math.pow(e[0]-a[0],2)+Math.pow(e[1]-a[1],2))}class u extends c{fillPolygons(t,e){let a=e.hachureGap;a<0&&(a=4*e.strokeWidth);let l=h(t,Object.assign({},e,{hachureGap:a=Math.max(a,.1)})),n=Math.PI/180*e.hachureAngle,i=[],r=.5*a*Math.cos(n),s=.5*a*Math.sin(n);for(let[t,e]of l)d([t,e])&&i.push([[t[0]-r,t[1]+s],[...e]],[[t[0]+r,t[1]-s],[...e]]);return{type:"fillSketch",ops:this.renderLines(i,e)}}}class g extends c{fillPolygons(t,e){let a=this._fillPolygons(t,e),l=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),n=this._fillPolygons(t,l);return a.ops=a.ops.concat(n.ops),a}}class f{fillPolygons(t,e){let a=h(t,e=Object.assign({},e,{hachureAngle:0}));return this.dotsOnLines(a,e)}dotsOnLines(t,e){let a=[],l=e.hachureGap;l<0&&(l=4*e.strokeWidth),l=Math.max(l,.1);let n=e.fillWeight;n<0&&(n=e.strokeWidth/2);let i=l/4;for(let r of t){let t=d(r),s=Math.ceil(t/l)-1,o=t-s*l,h=(r[0][0]+r[1][0])/2-l/4,c=Math.min(r[0][1],r[1][1]);for(let t=0;t<s;t++){let r=h-i+2*Math.random()*i,s=c+o+t*l-i+2*Math.random()*i,d=this.helper.ellipse(r,s,n,n,e);a.push(...d.ops)}}return{type:"fillSketch",ops:a}}constructor(t){this.helper=t}}class p{fillPolygons(t,e){let a=h(t,e);return{type:"fillSketch",ops:this.dashedLine(a,e)}}dashedLine(t,e){let a=e.dashOffset<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashOffset,l=e.dashGap<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashGap,n=[];return t.forEach(t=>{let i=d(t),r=Math.floor(i/(a+l)),s=(i+l-r*(a+l))/2,o=t[0],h=t[1];o[0]>h[0]&&(o=t[1],h=t[0]);let c=Math.atan((h[1]-o[1])/(h[0]-o[0]));for(let t=0;t<r;t++){let i=t*(a+l),r=i+a,h=[o[0]+i*Math.cos(c)+s*Math.cos(c),o[1]+i*Math.sin(c)+s*Math.sin(c)],d=[o[0]+r*Math.cos(c)+s*Math.cos(c),o[1]+r*Math.sin(c)+s*Math.sin(c)];n.push(...this.helper.doubleLineOps(h[0],h[1],d[0],d[1],e))}}),n}constructor(t){this.helper=t}}class y{fillPolygons(t,e){let a=e.hachureGap<0?4*e.strokeWidth:e.hachureGap,l=e.zigzagOffset<0?a:e.zigzagOffset,n=h(t,e=Object.assign({},e,{hachureGap:a+l}));return{type:"fillSketch",ops:this.zigzagLines(n,l,e)}}zigzagLines(t,e,a){let l=[];return t.forEach(t=>{let n=Math.round(d(t)/(2*e)),i=t[0],r=t[1];i[0]>r[0]&&(i=t[1],r=t[0]);let s=Math.atan((r[1]-i[1])/(r[0]-i[0]));for(let t=0;t<n;t++){let n=2*t*e,r=2*(t+1)*e,o=Math.sqrt(2*Math.pow(e,2)),h=[i[0]+n*Math.cos(s),i[1]+n*Math.sin(s)],c=[i[0]+r*Math.cos(s),i[1]+r*Math.sin(s)],d=[h[0]+o*Math.cos(s+Math.PI/4),h[1]+o*Math.sin(s+Math.PI/4)];l.push(...this.helper.doubleLineOps(h[0],h[1],d[0],d[1],a),...this.helper.doubleLineOps(d[0],d[1],c[0],c[1],a))}}),l}constructor(t){this.helper=t}}let m={};class x{next(){return this.seed?(0x80000000-1&(this.seed=Math.imul(48271,this.seed)))/0x80000000:Math.random()}constructor(t){this.seed=t}}let w={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function b(t){let e=[],a=function(t){let e=[];for(;""!==t;)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:0,text:RegExp.$1},t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];e[e.length]={type:1,text:"".concat(parseFloat(RegExp.$1))},t=t.substr(RegExp.$1.length)}return e[e.length]={type:2,text:""},e}(t),l="BOD",n=0,i=a[0];for(;2!==i.type;){let r=0,s=[];if("BOD"===l){if("M"!==i.text&&"m"!==i.text)return b("M0,0"+t);n++,r=w[i.text],l=i.text}else 1===i.type?r=w[l]:(n++,r=w[i.text],l=i.text);if(!(n+r<a.length))throw Error("Path data ended short");for(let t=n;t<n+r;t++){let e=a[t];if(1!==e.type)throw Error("Param not a number: "+l+","+e.text);s[s.length]=+e.text}if("number"!=typeof w[l])throw Error("Bad segment: "+l);{let t={key:l,data:s};e.push(t),n+=r,i=a[n],"M"===l&&(l="L"),"m"===l&&(l="l")}}return e}function v(t){let e=0,a=0,l=0,n=0,i=[];for(let{key:r,data:s}of t)switch(r){case"M":i.push({key:"M",data:[...s]}),[e,a]=s,[l,n]=s;break;case"m":e+=s[0],a+=s[1],i.push({key:"M",data:[e,a]}),l=e,n=a;break;case"L":i.push({key:"L",data:[...s]}),[e,a]=s;break;case"l":e+=s[0],a+=s[1],i.push({key:"L",data:[e,a]});break;case"C":i.push({key:"C",data:[...s]}),e=s[4],a=s[5];break;case"c":{let t=s.map((t,l)=>l%2?t+a:t+e);i.push({key:"C",data:t}),e=t[4],a=t[5];break}case"Q":i.push({key:"Q",data:[...s]}),e=s[2],a=s[3];break;case"q":{let t=s.map((t,l)=>l%2?t+a:t+e);i.push({key:"Q",data:t}),e=t[2],a=t[3];break}case"A":i.push({key:"A",data:[...s]}),e=s[5],a=s[6];break;case"a":e+=s[5],a+=s[6],i.push({key:"A",data:[s[0],s[1],s[2],s[3],s[4],e,a]});break;case"H":i.push({key:"H",data:[...s]}),e=s[0];break;case"h":e+=s[0],i.push({key:"H",data:[e]});break;case"V":i.push({key:"V",data:[...s]}),a=s[0];break;case"v":a+=s[0],i.push({key:"V",data:[a]});break;case"S":i.push({key:"S",data:[...s]}),e=s[2],a=s[3];break;case"s":{let t=s.map((t,l)=>l%2?t+a:t+e);i.push({key:"S",data:t}),e=t[2],a=t[3];break}case"T":i.push({key:"T",data:[...s]}),e=s[0],a=s[1];break;case"t":e+=s[0],a+=s[1],i.push({key:"T",data:[e,a]});break;case"Z":case"z":i.push({key:"Z",data:[]}),e=l,a=n}return i}function k(t){let e=[],a="",l=0,n=0,i=0,r=0,s=0,o=0;for(let{key:h,data:c}of t){switch(h){case"M":e.push({key:"M",data:[...c]}),[l,n]=c,[i,r]=c;break;case"C":e.push({key:"C",data:[...c]}),l=c[4],n=c[5],s=c[2],o=c[3];break;case"L":e.push({key:"L",data:[...c]}),[l,n]=c;break;case"H":l=c[0],e.push({key:"L",data:[l,n]});break;case"V":n=c[0],e.push({key:"L",data:[l,n]});break;case"S":{let t=0,i=0;"C"===a||"S"===a?(t=l+(l-s),i=n+(n-o)):(t=l,i=n),e.push({key:"C",data:[t,i,...c]}),s=c[0],o=c[1],l=c[2],n=c[3];break}case"T":{let[t,i]=c,r=0,h=0;"Q"===a||"T"===a?(r=l+(l-s),h=n+(n-o)):(r=l,h=n);let d=l+2*(r-l)/3,u=n+2*(h-n)/3,g=t+2*(r-t)/3,f=i+2*(h-i)/3;e.push({key:"C",data:[d,u,g,f,t,i]}),s=r,o=h,l=t,n=i;break}case"Q":{let[t,a,i,r]=c,h=l+2*(t-l)/3,d=n+2*(a-n)/3,u=i+2*(t-i)/3,g=r+2*(a-r)/3;e.push({key:"C",data:[h,d,u,g,i,r]}),s=t,o=a,l=i,n=r;break}case"A":{let t=Math.abs(c[0]),a=Math.abs(c[1]),i=c[2],r=c[3],s=c[4],o=c[5],h=c[6];0===t||0===a?(e.push({key:"C",data:[l,n,o,h,o,h]}),l=o,n=h):(l!==o||n!==h)&&((function t(e,a,l,n,i,r,s,o,h,c){let d=Math.PI*s/180,u=[],g=0,f=0,p=0,y=0;if(c)[g,f,p,y]=c;else{[e,a]=M(e,a,-d),[l,n]=M(l,n,-d);let t=(e-l)/2,s=(a-n)/2,c=t*t/(i*i)+s*s/(r*r);c>1&&(i*=c=Math.sqrt(c),r*=c);let u=i*i,m=r*r,x=(o===h?-1:1)*Math.sqrt(Math.abs((u*m-u*s*s-m*t*t)/(u*s*s+m*t*t)));p=x*i*s/r+(e+l)/2,y=-(x*r)*t/i+(a+n)/2,g=Math.asin(parseFloat(((a-y)/r).toFixed(9))),f=Math.asin(parseFloat(((n-y)/r).toFixed(9))),e<p&&(g=Math.PI-g),l<p&&(f=Math.PI-f),g<0&&(g=2*Math.PI+g),f<0&&(f=2*Math.PI+f),h&&g>f&&(g-=2*Math.PI),!h&&f>g&&(f-=2*Math.PI)}let m=f-g;if(Math.abs(m)>120*Math.PI/180){let e=f,a=l,o=n;u=t(l=p+i*Math.cos(f=h&&f>g?g+120*Math.PI/180*1:g+-(120*Math.PI/180*1)),n=y+r*Math.sin(f),a,o,i,r,s,0,h,[f,e,p,y])}m=f-g;let x=Math.cos(g),w=Math.cos(f),b=Math.tan(m/4),v=4/3*i*b,k=4/3*r*b,_=[e,a],S=[e+v*Math.sin(g),a-k*x],D=[l+v*Math.sin(f),n-k*w],C=[l,n];if(S[0]=2*_[0]-S[0],S[1]=2*_[1]-S[1],c)return[S,D,C].concat(u);{u=[S,D,C].concat(u);let t=[];for(let e=0;e<u.length;e+=3){let a=M(u[e][0],u[e][1],d),l=M(u[e+1][0],u[e+1][1],d),n=M(u[e+2][0],u[e+2][1],d);t.push([a[0],a[1],l[0],l[1],n[0],n[1]])}return t}})(l,n,o,h,t,a,i,r,s).forEach(function(t){e.push({key:"C",data:t})}),l=o,n=h);break}case"Z":e.push({key:"Z",data:[]}),l=i,n=r}a=h}return e}function M(t,e,a){return[t*Math.cos(a)-e*Math.sin(a),t*Math.sin(a)+e*Math.cos(a)]}let _={randOffset:function(t,e){return W(t,e)},randOffsetWithRange:function(t,e,a){return O(t,e,a)},ellipse:function(t,e,a,l,n){let i=A(a,l,n);return P(t,e,n,i).opset},doubleLineOps:function(t,e,a,l,n){return E(t,e,a,l,n,!0)}};function S(t,e,a,l,n){return{type:"path",ops:E(t,e,a,l,n)}}function D(t,e,a){let l=(t||[]).length;if(l>2){let n=[];for(let e=0;e<l-1;e++)n.push(...E(t[e][0],t[e][1],t[e+1][0],t[e+1][1],a));return e&&n.push(...E(t[l-1][0],t[l-1][1],t[0][0],t[0][1],a)),{type:"path",ops:n}}return 2===l?S(t[0][0],t[0][1],t[1][0],t[1][1],a):{type:"path",ops:[]}}function C(t,e){if(t.length){let a="number"==typeof t[0][0]?[t]:t,l=z(a[0],+(1+.2*e.roughness),e),n=e.disableMultiStroke?[]:z(a[0],1.5*(1+.22*e.roughness),R(e));for(let t=1;t<a.length;t++){let i=a[t];if(i.length){let t=z(i,+(1+.2*e.roughness),e),a=e.disableMultiStroke?[]:z(i,1.5*(1+.22*e.roughness),R(e));for(let e of t)"move"!==e.op&&l.push(e);for(let t of a)"move"!==t.op&&n.push(t)}}return{type:"path",ops:l.concat(n)}}return{type:"path",ops:[]}}function A(t,e,a){let l=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),n=2*Math.PI/Math.ceil(Math.max(a.curveStepCount,a.curveStepCount/Math.sqrt(200)*l)),i=Math.abs(t/2),r=Math.abs(e/2),s=1-a.curveFitting;return i+=W(i*s,a),r+=W(r*s,a),{increment:n,rx:i,ry:r}}function P(t,e,a,l){let[n,i]=q(l.increment,t,e,l.rx,l.ry,1,l.increment*O(.1,O(.4,1,a),a),a),r=H(n,null,a);if(!a.disableMultiStroke&&0!==a.roughness){let[n]=q(l.increment,t,e,l.rx,l.ry,1.5,0,a),i=H(n,null,a);r=r.concat(i)}return{estimatedPoints:i,opset:{type:"path",ops:r}}}function L(t,e,a,l,n,i,r,s,o){let h=Math.abs(a/2),c=Math.abs(l/2);h+=W(.01*h,o),c+=W(.01*c,o);let d=n,u=i;for(;d<0;)d+=2*Math.PI,u+=2*Math.PI;u-d>2*Math.PI&&(d=0,u=2*Math.PI);let g=Math.min(2*Math.PI/o.curveStepCount/2,(u-d)/2),f=F(g,t,e,h,c,d,u,1,o);if(!o.disableMultiStroke){let a=F(g,t,e,h,c,d,u,1.5,o);f.push(...a)}return r&&(s?f.push(...E(t,e,t+h*Math.cos(d),e+c*Math.sin(d),o),...E(t,e,t+h*Math.cos(u),e+c*Math.sin(u),o)):f.push({op:"lineTo",data:[t,e]},{op:"lineTo",data:[t+h*Math.cos(d),e+c*Math.sin(d)]})),{type:"path",ops:f}}function B(t,e){let a=k(v(b(t))),l=[],n=[0,0],i=[0,0];for(let{key:t,data:r}of a)switch(t){case"M":i=[r[0],r[1]],n=[r[0],r[1]];break;case"L":l.push(...E(i[0],i[1],r[0],r[1],e)),i=[r[0],r[1]];break;case"C":{let[t,a,n,s,o,h]=r;l.push(...function(t,e,a,l,n,i,r,s){let o=[],h=[s.maxRandomnessOffset||1,(s.maxRandomnessOffset||1)+.3],c=[0,0],d=s.disableMultiStroke?1:2,u=s.preserveVertices;for(let g=0;g<d;g++)0===g?o.push({op:"move",data:[r[0],r[1]]}):o.push({op:"move",data:[r[0]+(u?0:W(h[0],s)),r[1]+(u?0:W(h[0],s))]}),c=u?[n,i]:[n+W(h[g],s),i+W(h[g],s)],o.push({op:"bcurveTo",data:[t+W(h[g],s),e+W(h[g],s),a+W(h[g],s),l+W(h[g],s),c[0],c[1]]});return o}(t,a,n,s,o,h,i,e)),i=[o,h];break}case"Z":l.push(...E(i[0],i[1],n[0],n[1],e)),i=[n[0],n[1]]}return{type:"path",ops:l}}function N(t,e){let a=[];for(let l of t)if(l.length){let t=e.maxRandomnessOffset||0,n=l.length;if(n>2){a.push({op:"move",data:[l[0][0]+W(t,e),l[0][1]+W(t,e)]});for(let i=1;i<n;i++)a.push({op:"lineTo",data:[l[i][0]+W(t,e),l[i][1]+W(t,e)]})}}return{type:"fillPath",ops:a}}function T(t,e){return(function(t,e){let a=t.fillStyle||"hachure";if(!m[a])switch(a){case"zigzag":m[a]||(m[a]=new u(e));break;case"cross-hatch":m[a]||(m[a]=new g(e));break;case"dots":m[a]||(m[a]=new f(e));break;case"dashed":m[a]||(m[a]=new p(e));break;case"zigzag-line":m[a]||(m[a]=new y(e));break;default:m[a="hachure"]||(m[a]=new c(e))}return m[a]})(e,_).fillPolygons(t,e)}function R(t){let e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}function I(t){return t.randomizer||(t.randomizer=new x(t.seed||0)),t.randomizer.next()}function O(t,e,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return a.roughness*l*(I(a)*(e-t)+t)}function W(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return O(-t,t,e,a)}function E(t,e,a,l,n){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],r=i?n.disableMultiStrokeFill:n.disableMultiStroke,s=j(t,e,a,l,n,!0,!1);if(r)return s;let o=j(t,e,a,l,n,!0,!0);return s.concat(o)}function j(t,e,a,l,n,i,r){let s=Math.pow(t-a,2)+Math.pow(e-l,2),o=Math.sqrt(s),h=1;h=o<200?1:o>500?.4:-.0016668*o+1.233334;let c=n.maxRandomnessOffset||0;c*c*100>s&&(c=o/10);let d=c/2,u=.2+.2*I(n),g=n.bowing*n.maxRandomnessOffset*(l-e)/200,f=n.bowing*n.maxRandomnessOffset*(t-a)/200;g=W(g,n,h),f=W(f,n,h);let p=[],y=()=>W(d,n,h),m=()=>W(c,n,h),x=n.preserveVertices;return i&&(r?p.push({op:"move",data:[t+(x?0:y()),e+(x?0:y())]}):p.push({op:"move",data:[t+(x?0:W(c,n,h)),e+(x?0:W(c,n,h))]})),r?p.push({op:"bcurveTo",data:[g+t+(a-t)*u+y(),f+e+(l-e)*u+y(),g+t+2*(a-t)*u+y(),f+e+2*(l-e)*u+y(),a+(x?0:y()),l+(x?0:y())]}):p.push({op:"bcurveTo",data:[g+t+(a-t)*u+m(),f+e+(l-e)*u+m(),g+t+2*(a-t)*u+m(),f+e+2*(l-e)*u+m(),a+(x?0:m()),l+(x?0:m())]}),p}function z(t,e,a){if(!t.length)return[];let l=[];l.push([t[0][0]+W(e,a),t[0][1]+W(e,a)]),l.push([t[0][0]+W(e,a),t[0][1]+W(e,a)]);for(let n=1;n<t.length;n++)l.push([t[n][0]+W(e,a),t[n][1]+W(e,a)]),n===t.length-1&&l.push([t[n][0]+W(e,a),t[n][1]+W(e,a)]);return H(l,null,a)}function H(t,e,a){let l=t.length,n=[];if(l>3){let i=[],r=1-a.curveTightness;n.push({op:"move",data:[t[1][0],t[1][1]]});for(let e=1;e+2<l;e++){let a=t[e];i[0]=[a[0],a[1]],i[1]=[a[0]+(r*t[e+1][0]-r*t[e-1][0])/6,a[1]+(r*t[e+1][1]-r*t[e-1][1])/6],i[2]=[t[e+1][0]+(r*t[e][0]-r*t[e+2][0])/6,t[e+1][1]+(r*t[e][1]-r*t[e+2][1])/6],i[3]=[t[e+1][0],t[e+1][1]],n.push({op:"bcurveTo",data:[i[1][0],i[1][1],i[2][0],i[2][1],i[3][0],i[3][1]]})}if(e&&2===e.length){let t=a.maxRandomnessOffset;n.push({op:"lineTo",data:[e[0]+W(t,a),e[1]+W(t,a)]})}}else 3===l?(n.push({op:"move",data:[t[1][0],t[1][1]]}),n.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===l&&n.push(...j(t[0][0],t[0][1],t[1][0],t[1][1],a,!0,!0));return n}function q(t,e,a,l,n,i,r,s){let o=[],h=[];if(0===s.roughness){t/=4,h.push([e+l*Math.cos(-t),a+n*Math.sin(-t)]);for(let i=0;i<=2*Math.PI;i+=t){let t=[e+l*Math.cos(i),a+n*Math.sin(i)];o.push(t),h.push(t)}h.push([e+ +l,a+0*n]),h.push([e+l*Math.cos(t),a+n*Math.sin(t)])}else{let c=W(.5,s)-Math.PI/2;h.push([W(i,s)+e+.9*l*Math.cos(c-t),W(i,s)+a+.9*n*Math.sin(c-t)]);let d=2*Math.PI+c-.01;for(let r=c;r<d;r+=t){let t=[W(i,s)+e+l*Math.cos(r),W(i,s)+a+n*Math.sin(r)];o.push(t),h.push(t)}h.push([W(i,s)+e+l*Math.cos(c+2*Math.PI+.5*r),W(i,s)+a+n*Math.sin(c+2*Math.PI+.5*r)]),h.push([W(i,s)+e+.98*l*Math.cos(c+r),W(i,s)+a+.98*n*Math.sin(c+r)]),h.push([W(i,s)+e+.9*l*Math.cos(c+.5*r),W(i,s)+a+.9*n*Math.sin(c+.5*r)])}return[h,o]}function F(t,e,a,l,n,i,r,s,o){let h=i+W(.1,o),c=[];c.push([W(s,o)+e+.9*l*Math.cos(h-t),W(s,o)+a+.9*n*Math.sin(h-t)]);for(let i=h;i<=r;i+=t)c.push([W(s,o)+e+l*Math.cos(i),W(s,o)+a+n*Math.sin(i)]);return c.push([e+l*Math.cos(r),a+n*Math.sin(r)]),c.push([e+l*Math.cos(r),a+n*Math.sin(r)]),H(c,null,o)}function G(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=t.length;if(a<3)throw Error("A curve must have at least three points.");let l=[];if(3===a)l.push([...t[0]],[...t[1]],[...t[2]],[...t[2]]);else{let a=[];a.push(t[0],t[0]);for(let e=1;e<t.length;e++)a.push(t[e]),e===t.length-1&&a.push(t[e]);let n=[],i=1-e;l.push([...a[0]]);for(let t=1;t+2<a.length;t++){let e=a[t];n[0]=[e[0],e[1]],n[1]=[e[0]+(i*a[t+1][0]-i*a[t-1][0])/6,e[1]+(i*a[t+1][1]-i*a[t-1][1])/6],n[2]=[a[t+1][0]+(i*a[t][0]-i*a[t+2][0])/6,a[t+1][1]+(i*a[t][1]-i*a[t+2][1])/6],n[3]=[a[t+1][0],a[t+1][1]],l.push(n[1],n[2],n[3])}}return l}function V(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function U(t,e,a){return[t[0]+(e[0]-t[0])*a,t[1]+(e[1]-t[1])*a]}function Z(t,e,a,l,n){let i=n||[],r=t[e],s=t[a-1],o=0,h=1;for(let l=e+1;l<a-1;++l){let e=function(t,e,a){let l=V(e,a);if(0===l)return V(t,e);let n=((t[0]-e[0])*(a[0]-e[0])+(t[1]-e[1])*(a[1]-e[1]))/l;return V(t,U(e,a,n=Math.max(0,Math.min(1,n))))}(t[l],r,s);e>o&&(o=e,h=l)}return Math.sqrt(o)>l?(Z(t,e,h+1,l,i),Z(t,h,a,l,i)):(i.length||i.push(r),i.push(s)),i}function X(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15,a=arguments.length>2?arguments[2]:void 0,l=[],n=(t.length-1)/3;for(let a=0;a<n;a++)!function t(e,a,l,n){let i=n||[];if(function(t,e){let a=t[e+0],l=t[e+1],n=t[e+2],i=t[e+3],r=3*l[0]-2*a[0]-i[0];r*=r;let s=3*l[1]-2*a[1]-i[1];s*=s;let o=3*n[0]-2*i[0]-a[0];o*=o;let h=3*n[1]-2*i[1]-a[1];return h*=h,r<o&&(r=o),s<h&&(s=h),r+s}(e,a)<l){let t=e[a+0];i.length?Math.sqrt(V(i[i.length-1],t))>1&&i.push(t):i.push(t),i.push(e[a+3])}else{let n=e[a+0],r=e[a+1],s=e[a+2],o=e[a+3],h=U(n,r,.5),c=U(r,s,.5),d=U(s,o,.5),u=U(h,c,.5),g=U(c,d,.5),f=U(u,g,.5);t([n,h,u,f],0,l,i),t([f,g,d,o],0,l,i)}return i}(t,3*a,e,l);return a&&a>0?Z(l,0,l.length,a):l}let Q="none";class Y{static newSeed(){return Math.floor(0x80000000*Math.random())}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,e,a){return{shape:t,sets:e||[],options:a||this.defaultOptions}}line(t,e,a,l,n){let i=this._o(n);return this._d("line",[S(t,e,a,l,i)],i)}rectangle(t,e,a,l,n){var i,r,s,o;let h=this._o(n),c=[],d=D([[i=t,r=e],[i+(s=a),r],[i+s,r+(o=l)],[i,r+o]],!0,h);if(h.fill){let n=[[t,e],[t+a,e],[t+a,e+l],[t,e+l]];"solid"===h.fillStyle?c.push(N([n],h)):c.push(T([n],h))}return h.stroke!==Q&&c.push(d),this._d("rectangle",c,h)}ellipse(t,e,a,l,n){let i=this._o(n),r=[],s=A(a,l,i),o=P(t,e,i,s);if(i.fill)if("solid"===i.fillStyle){let a=P(t,e,i,s).opset;a.type="fillPath",r.push(a)}else r.push(T([o.estimatedPoints],i));return i.stroke!==Q&&r.push(o.opset),this._d("ellipse",r,i)}circle(t,e,a,l){let n=this.ellipse(t,e,a,a,l);return n.shape="circle",n}linearPath(t,e){let a=this._o(e);return this._d("linearPath",[D(t,!1,a)],a)}arc(t,e,a,l,n,i){let r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,o=this._o(s),h=[],c=L(t,e,a,l,n,i,r,!0,o);if(r&&o.fill)if("solid"===o.fillStyle){let r=Object.assign({},o);r.disableMultiStroke=!0;let s=L(t,e,a,l,n,i,!0,!1,r);s.type="fillPath",h.push(s)}else h.push(function(t,e,a,l,n,i,r){let s=Math.abs(a/2),o=Math.abs(l/2);s+=W(.01*s,r),o+=W(.01*o,r);let h=n,c=i;for(;h<0;)h+=2*Math.PI,c+=2*Math.PI;c-h>2*Math.PI&&(h=0,c=2*Math.PI);let d=(c-h)/r.curveStepCount,u=[];for(let a=h;a<=c;a+=d)u.push([t+s*Math.cos(a),e+o*Math.sin(a)]);return u.push([t+s*Math.cos(c),e+o*Math.sin(c)]),u.push([t,e]),T([u],r)}(t,e,a,l,n,i,o));return o.stroke!==Q&&h.push(c),this._d("arc",h,o)}curve(t,e){let a=this._o(e),l=[],n=C(t,a);if(a.fill&&a.fill!==Q)if("solid"===a.fillStyle){let e=C(t,Object.assign(Object.assign({},a),{disableMultiStroke:!0,roughness:a.roughness?a.roughness+a.fillShapeRoughnessGain:0}));l.push({type:"fillPath",ops:this._mergedShape(e.ops)})}else{let e=[];if(t.length)for(let l of"number"==typeof t[0][0]?[t]:t)l.length<3?e.push(...l):3===l.length?e.push(...X(G([l[0],l[0],l[1],l[2]]),10,(1+a.roughness)/2)):e.push(...X(G(l),10,(1+a.roughness)/2));e.length&&l.push(T([e],a))}return a.stroke!==Q&&l.push(n),this._d("curve",l,a)}polygon(t,e){let a=this._o(e),l=[],n=D(t,!0,a);return a.fill&&("solid"===a.fillStyle?l.push(N([t],a)):l.push(T([t],a))),a.stroke!==Q&&l.push(n),this._d("polygon",l,a)}path(t,e){let a=this._o(e),l=[];if(!t)return this._d("path",l,a);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");let n=a.fill&&"transparent"!==a.fill&&a.fill!==Q,i=a.stroke!==Q,r=!!(a.simplification&&a.simplification<1),s=function(t,e,a){let l=k(v(b(t))),n=[],i=[],r=[0,0],s=[],o=()=>{s.length>=4&&i.push(...X(s,1)),s=[]},h=()=>{o(),i.length&&(n.push(i),i=[])};for(let{key:t,data:e}of l)switch(t){case"M":h(),r=[e[0],e[1]],i.push(r);break;case"L":o(),i.push([e[0],e[1]]);break;case"C":if(!s.length){let t=i.length?i[i.length-1]:r;s.push([t[0],t[1]])}s.push([e[0],e[1]]),s.push([e[2],e[3]]),s.push([e[4],e[5]]);break;case"Z":o(),i.push([r[0],r[1]])}if(h(),!a)return n;let c=[];for(let t of n){let e=Z(t,0,t.length,a);e.length&&c.push(e)}return c}(t,0,r?4-4*(a.simplification||1):(1+a.roughness)/2),o=B(t,a);if(n)if("solid"===a.fillStyle)if(1===s.length){let e=B(t,Object.assign(Object.assign({},a),{disableMultiStroke:!0,roughness:a.roughness?a.roughness+a.fillShapeRoughnessGain:0}));l.push({type:"fillPath",ops:this._mergedShape(e.ops)})}else l.push(N(s,a));else l.push(T(s,a));return i&&(r?s.forEach(t=>{l.push(D(t,!1,a))}):l.push(o)),this._d("path",l,a)}opsToPath(t,e){let a="";for(let l of t.ops){let t="number"==typeof e&&e>=0?l.data.map(t=>+t.toFixed(e)):l.data;switch(l.op){case"move":a+="M".concat(t[0]," ").concat(t[1]," ");break;case"bcurveTo":a+="C".concat(t[0]," ").concat(t[1],", ").concat(t[2]," ").concat(t[3],", ").concat(t[4]," ").concat(t[5]," ");break;case"lineTo":a+="L".concat(t[0]," ").concat(t[1]," ")}}return a.trim()}toPaths(t){let e=t.sets||[],a=t.options||this.defaultOptions,l=[];for(let t of e){let e=null;switch(t.type){case"path":e={d:this.opsToPath(t),stroke:a.stroke,strokeWidth:a.strokeWidth,fill:Q};break;case"fillPath":e={d:this.opsToPath(t),stroke:Q,strokeWidth:0,fill:a.fill||Q};break;case"fillSketch":e=this.fillSketch(t,a)}e&&l.push(e)}return l}fillSketch(t,e){let a=e.fillWeight;return a<0&&(a=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||Q,strokeWidth:a,fill:Q}}_mergedShape(t){return t.filter((t,e)=>0===e||"move"!==t.op)}constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}}class J{draw(t){let e=t.sets||[],a=t.options||this.getDefaultOptions(),l=this.ctx,n=t.options.fixedDecimalPlaceDigits;for(let i of e)switch(i.type){case"path":l.save(),l.strokeStyle="none"===a.stroke?"transparent":a.stroke,l.lineWidth=a.strokeWidth,a.strokeLineDash&&l.setLineDash(a.strokeLineDash),a.strokeLineDashOffset&&(l.lineDashOffset=a.strokeLineDashOffset),this._drawToContext(l,i,n),l.restore();break;case"fillPath":{l.save(),l.fillStyle=a.fill||"";let e="curve"===t.shape||"polygon"===t.shape||"path"===t.shape?"evenodd":"nonzero";this._drawToContext(l,i,n,e),l.restore();break}case"fillSketch":this.fillSketch(l,i,a)}}fillSketch(t,e,a){let l=a.fillWeight;l<0&&(l=a.strokeWidth/2),t.save(),a.fillLineDash&&t.setLineDash(a.fillLineDash),a.fillLineDashOffset&&(t.lineDashOffset=a.fillLineDashOffset),t.strokeStyle=a.fill||"",t.lineWidth=l,this._drawToContext(t,e,a.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,e,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"nonzero";for(let l of(t.beginPath(),e.ops)){let e="number"==typeof a&&a>=0?l.data.map(t=>+t.toFixed(a)):l.data;switch(l.op){case"move":t.moveTo(e[0],e[1]);break;case"bcurveTo":t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]);break;case"lineTo":t.lineTo(e[0],e[1])}}"fillPath"===e.type?t.fill(l):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,e,a,l,n){let i=this.gen.line(t,e,a,l,n);return this.draw(i),i}rectangle(t,e,a,l,n){let i=this.gen.rectangle(t,e,a,l,n);return this.draw(i),i}ellipse(t,e,a,l,n){let i=this.gen.ellipse(t,e,a,l,n);return this.draw(i),i}circle(t,e,a,l){let n=this.gen.circle(t,e,a,l);return this.draw(n),n}linearPath(t,e){let a=this.gen.linearPath(t,e);return this.draw(a),a}polygon(t,e){let a=this.gen.polygon(t,e);return this.draw(a),a}arc(t,e,a,l,n,i){let r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,o=this.gen.arc(t,e,a,l,n,i,r,s);return this.draw(o),o}curve(t,e){let a=this.gen.curve(t,e);return this.draw(a),a}path(t,e){let a=this.gen.path(t,e);return this.draw(a),a}constructor(t,e){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new Y(e)}}let K="http://www.w3.org/2000/svg";class ${draw(t){let e=t.sets||[],a=t.options||this.getDefaultOptions(),l=this.svg.ownerDocument||window.document,n=l.createElementNS(K,"g"),i=t.options.fixedDecimalPlaceDigits;for(let r of e){let e=null;switch(r.type){case"path":(e=l.createElementNS(K,"path")).setAttribute("d",this.opsToPath(r,i)),e.setAttribute("stroke",a.stroke),e.setAttribute("stroke-width",a.strokeWidth+""),e.setAttribute("fill","none"),a.strokeLineDash&&e.setAttribute("stroke-dasharray",a.strokeLineDash.join(" ").trim()),a.strokeLineDashOffset&&e.setAttribute("stroke-dashoffset","".concat(a.strokeLineDashOffset));break;case"fillPath":(e=l.createElementNS(K,"path")).setAttribute("d",this.opsToPath(r,i)),e.setAttribute("stroke","none"),e.setAttribute("stroke-width","0"),e.setAttribute("fill",a.fill||""),"curve"!==t.shape&&"polygon"!==t.shape||e.setAttribute("fill-rule","evenodd");break;case"fillSketch":e=this.fillSketch(l,r,a)}e&&n.appendChild(e)}return n}fillSketch(t,e,a){let l=a.fillWeight;l<0&&(l=a.strokeWidth/2);let n=t.createElementNS(K,"path");return n.setAttribute("d",this.opsToPath(e,a.fixedDecimalPlaceDigits)),n.setAttribute("stroke",a.fill||""),n.setAttribute("stroke-width",l+""),n.setAttribute("fill","none"),a.fillLineDash&&n.setAttribute("stroke-dasharray",a.fillLineDash.join(" ").trim()),a.fillLineDashOffset&&n.setAttribute("stroke-dashoffset","".concat(a.fillLineDashOffset)),n}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,e){return this.gen.opsToPath(t,e)}line(t,e,a,l,n){let i=this.gen.line(t,e,a,l,n);return this.draw(i)}rectangle(t,e,a,l,n){let i=this.gen.rectangle(t,e,a,l,n);return this.draw(i)}ellipse(t,e,a,l,n){let i=this.gen.ellipse(t,e,a,l,n);return this.draw(i)}circle(t,e,a,l){let n=this.gen.circle(t,e,a,l);return this.draw(n)}linearPath(t,e){let a=this.gen.linearPath(t,e);return this.draw(a)}polygon(t,e){let a=this.gen.polygon(t,e);return this.draw(a)}arc(t,e,a,l,n,i){let r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,o=this.gen.arc(t,e,a,l,n,i,r,s);return this.draw(o)}curve(t,e){let a=this.gen.curve(t,e);return this.draw(a)}path(t,e){let a=this.gen.path(t,e);return this.draw(a)}constructor(t,e){this.svg=t,this.gen=new Y(e)}}var tt={canvas:(t,e)=>new J(t,e),svg:(t,e)=>new $(t,e),generator:t=>new Y(t),newSeed:()=>Y.newSeed()},te=(0,r.__name)(async(t,e,a)=>{var l,o,h;let c,d=e.useHtmlLabels||(0,r.evaluate)(null==(l=(0,r.getConfig2)())?void 0:l.htmlLabels),u=t.insert("g").attr("class",a||"node default").attr("id",e.domId||e.id),g=u.insert("g").attr("class","label").attr("style",(0,i.handleUndefinedAttr)(e.labelStyle));c=void 0===e.label?"":"string"==typeof e.label?e.label:e.label[0];let f=await (0,n.createText)(g,(0,r.sanitizeText)((0,i.decodeEntities)(c),(0,r.getConfig2)()),{useHtmlLabels:d,width:e.width||(null==(o=(0,r.getConfig2)().flowchart)?void 0:o.wrappingWidth),cssClasses:"markdown-node-label",style:e.labelStyle,addSvgBackground:!!e.icon||!!e.img}),p=f.getBBox(),y=(null!=(h=null==e?void 0:e.padding)?h:0)/2;if(d){let t=f.children[0],e=(0,s.select)(f),a=t.getElementsByTagName("img");if(a){let t=""===c.replace(/<img[^>]*>/g,"").trim();await Promise.all([...a].map(e=>new Promise(a=>{function l(){if(e.style.display="flex",e.style.flexDirection="column",t){let t=(0,r.getConfig2)().fontSize?(0,r.getConfig2)().fontSize:window.getComputedStyle(document.body).fontSize,[a=r.defaultConfig_default.fontSize]=(0,i.parseFontSize)(t),l=5*a+"px";e.style.minWidth=l,e.style.maxWidth=l}else e.style.width="100%";a(e)}(0,r.__name)(l,"setupImage"),setTimeout(()=>{e.complete&&l()}),e.addEventListener("error",l),e.addEventListener("load",l)})))}p=t.getBoundingClientRect(),e.attr("width",p.width),e.attr("height",p.height)}return d?g.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"):g.attr("transform","translate(0, "+-p.height/2+")"),e.centerLabel&&g.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),g.insert("rect",":first-child"),{shapeSvg:u,bbox:p,halfPadding:y,label:g}},"labelHelper"),ta=(0,r.__name)(async(t,e,a)=>{var l,o,h,c,d,u;let g=a.useHtmlLabels||(0,r.evaluate)(null==(o=(0,r.getConfig2)())||null==(l=o.flowchart)?void 0:l.htmlLabels),f=t.insert("g").attr("class","label").attr("style",a.labelStyle||""),p=await (0,n.createText)(f,(0,r.sanitizeText)((0,i.decodeEntities)(e),(0,r.getConfig2)()),{useHtmlLabels:g,width:a.width||(null==(c=(0,r.getConfig2)())||null==(h=c.flowchart)?void 0:h.wrappingWidth),style:a.labelStyle,addSvgBackground:!!a.icon||!!a.img}),y=p.getBBox(),m=a.padding/2;if((0,r.evaluate)(null==(u=(0,r.getConfig2)())||null==(d=u.flowchart)?void 0:d.htmlLabels)){let t=p.children[0],e=(0,s.select)(p);y=t.getBoundingClientRect(),e.attr("width",y.width),e.attr("height",y.height)}return g?f.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"):f.attr("transform","translate(0, "+-y.height/2+")"),a.centerLabel&&f.attr("transform","translate("+-y.width/2+", "+-y.height/2+")"),f.insert("rect",":first-child"),{shapeSvg:t,bbox:y,halfPadding:m,label:f}},"insertLabel"),tl=(0,r.__name)((t,e)=>{let a=e.node().getBBox();t.width=a.width,t.height=a.height},"updateNodeBounds"),tn=(0,r.__name)((t,e)=>("handDrawn"===t.look?"rough-node":"node")+" "+t.cssClasses+" "+(e||""),"getNodeClasses");function ti(t){let e=t.map((t,e)=>"".concat(0===e?"M":"L").concat(t.x,",").concat(t.y));return e.push("Z"),e.join(" ")}function tr(t,e,a,l,n,i){let r=[],s=a-t,o=2*Math.PI/(s/i),h=e+(l-e)/2;for(let e=0;e<=50;e++){let a=t+e/50*s,l=h+n*Math.sin(o*(a-t));r.push({x:a,y:l})}return r}function ts(t,e,a,l,n,i){let r=[],s=n*Math.PI/180,o=(i*Math.PI/180-s)/(l-1);for(let n=0;n<l;n++){let l=s+n*o,i=t+a*Math.cos(l),h=e+a*Math.sin(l);r.push({x:-i,y:-h})}return r}(0,r.__name)(ti,"createPathFromPoints"),(0,r.__name)(tr,"generateFullSineWavePoints"),(0,r.__name)(ts,"generateCirclePoints");var to=(0,r.__name)((t,e)=>{var a,l,n=t.x,i=t.y,r=e.x-n,s=e.y-i,o=t.width/2,h=t.height/2;return Math.abs(s)*o>Math.abs(r)*h?(s<0&&(h=-h),a=0===s?0:h*r/s,l=h):(r<0&&(o=-o),a=o,l=0===r?0:o*s/r),{x:n+a,y:i+l}},"intersectRect");function th(t,e){e&&t.attr("style",e)}async function tc(t){let e=(0,s.select)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),a=e.append("xhtml:div"),l=t.label;t.label&&(0,r.hasKatex)(t.label)&&(l=await (0,r.renderKatex)(t.label.replace(r.common_default.lineBreakRegex,"\n"),(0,r.getConfig2)()));let n=t.isNode?"nodeLabel":"edgeLabel";return a.html('<span class="'+n+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+l+"</span>"),th(a,t.labelStyle),a.style("display","inline-block"),a.style("padding-right","1px"),a.style("white-space","nowrap"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}(0,r.__name)(th,"applyStyle"),(0,r.__name)(tc,"addHtmlLabel");var td=(0,r.__name)(async(t,e,a,l)=>{let n=t||"";if("object"==typeof n&&(n=n[0]),(0,r.evaluate)((0,r.getConfig2)().flowchart.htmlLabels)){n=n.replace(/\\n|\n/g,"<br />"),r.log.info("vertexText"+n);let t={isNode:l,label:(0,i.decodeEntities)(n).replace(/fa[blrs]?:fa-[\w-]+/g,t=>"<i class='".concat(t.replace(":"," "),"'></i>")),labelStyle:e?e.replace("fill:","color:"):e};return await tc(t)}{let t=document.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",e.replace("color:","fill:"));for(let e of"string"==typeof n?n.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(n)?n:[]){let l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),a?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=e.trim(),t.appendChild(l)}return t}},"createLabel"),tu=(0,r.__name)((t,e,a,l,n)=>["M",t+n,e,"H",t+a-n,"A",n,n,"0 0 1",t+a,e+n,"V",e+l-n,"A",n,n,"0 0 1",t+a-n,e+l,"H",t+n,"A",n,n,"0 0 1",t,e+l-n,"V",e+n,"A",n,n,"0 0 1",t+n,e,"Z"].join(" "),"createRoundedRectPathD"),tg=(0,r.__name)(t=>{let{handDrawnSeed:e}=(0,r.getConfig2)();return{fill:t,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:t,seed:e}},"solidStateFill"),tf=(0,r.__name)(t=>{let e=tp([...t.cssCompiledStyles||[],...t.cssStyles||[]]);return{stylesMap:e,stylesArray:[...e]}},"compileStyles"),tp=(0,r.__name)(t=>{let e=new Map;return t.forEach(t=>{let[a,l]=t.split(":");e.set(a.trim(),null==l?void 0:l.trim())}),e},"styles2Map"),ty=(0,r.__name)(t=>"color"===t||"font-size"===t||"font-family"===t||"font-weight"===t||"font-style"===t||"text-decoration"===t||"text-align"===t||"text-transform"===t||"line-height"===t||"letter-spacing"===t||"word-spacing"===t||"text-shadow"===t||"text-overflow"===t||"white-space"===t||"word-wrap"===t||"word-break"===t||"overflow-wrap"===t||"hyphens"===t,"isLabelStyle"),tm=(0,r.__name)(t=>{let{stylesArray:e}=tf(t),a=[],l=[],n=[],i=[];return e.forEach(t=>{let e=t[0];ty(e)?a.push(t.join(":")+" !important"):(l.push(t.join(":")+" !important"),e.includes("stroke")&&n.push(t.join(":")+" !important"),"fill"===e&&i.push(t.join(":")+" !important"))}),{labelStyles:a.join(";"),nodeStyles:l.join(";"),stylesArray:e,borderStyles:n,backgroundStyles:i}},"styles2String"),tx=(0,r.__name)((t,e)=>{var a;let{themeVariables:l,handDrawnSeed:n}=(0,r.getConfig2)(),{nodeBorder:i,mainBkg:s}=l,{stylesMap:o}=tf(t);return Object.assign({roughness:.7,fill:o.get("fill")||s,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:o.get("stroke")||i,seed:n,strokeWidth:(null==(a=o.get("stroke-width"))?void 0:a.replace("px",""))||1.3,fillLineDash:[0,0]},e)},"userNodeOverrides"),tw=(0,r.__name)(async(t,e)=>{let l;r.log.info("Creating subgraph rect for ",e.id,e);let i=(0,r.getConfig2)(),{themeVariables:o,handDrawnSeed:h}=i,{clusterBkg:c,clusterBorder:d}=o,{labelStyles:u,nodeStyles:g,borderStyles:f,backgroundStyles:p}=tm(e),y=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),m=(0,r.evaluate)(i.flowchart.htmlLabels),x=y.insert("g").attr("class","cluster-label "),w=await (0,n.createText)(x,e.label,{style:e.labelStyle,useHtmlLabels:m,isNode:!0}),b=w.getBBox();if((0,r.evaluate)(i.flowchart.htmlLabels)){let t=w.children[0],e=(0,s.select)(w);b=t.getBoundingClientRect(),e.attr("width",b.width),e.attr("height",b.height)}let v=e.width<=b.width+e.padding?b.width+e.padding:e.width;e.width<=b.width+e.padding?e.diff=(v-e.width)/2-e.padding:e.diff=-e.padding;let k=e.height,M=e.x-v/2,_=e.y-k/2;if(r.log.trace("Data ",e,JSON.stringify(e)),"handDrawn"===e.look){let t=tt.svg(y),a=tx(e,{roughness:.7,fill:c,stroke:d,fillWeight:3,seed:h}),n=t.path(tu(M,_,v,k,0),a);(l=y.insert(()=>(r.log.debug("Rough node insert CXC",n),n),":first-child")).select("path:nth-child(2)").attr("style",f.join(";")),l.select("path").attr("style",p.join(";").replace("fill","stroke"))}else(l=y.insert("rect",":first-child")).attr("style",g).attr("rx",e.rx).attr("ry",e.ry).attr("x",M).attr("y",_).attr("width",v).attr("height",k);let{subGraphTitleTopMargin:S}=(0,a.getSubGraphTitleMargins)(i);if(x.attr("transform","translate(".concat(e.x-b.width/2,", ").concat(e.y-e.height/2+S,")")),u){let t=x.select("span");t&&t.attr("style",u)}let D=l.node().getBBox();return e.offsetX=0,e.width=D.width,e.height=D.height,e.offsetY=b.height-e.padding/2,e.intersect=function(t){return to(e,t)},{cluster:y,labelBBox:b}},"rect"),tb=(0,r.__name)((t,e)=>{let a=t.insert("g").attr("class","note-cluster").attr("id",e.id),l=a.insert("rect",":first-child"),n=0*e.padding,i=n/2;l.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-i).attr("y",e.y-e.height/2-i).attr("width",e.width+n).attr("height",e.height+n).attr("fill","none");let r=l.node().getBBox();return e.width=r.width,e.height=r.height,e.intersect=function(t){return to(e,t)},{cluster:a,labelBBox:{width:0,height:0}}},"noteGroup"),tv=(0,r.__name)(async(t,e)=>{let a,l=(0,r.getConfig2)(),{themeVariables:n,handDrawnSeed:i}=l,{altBackground:o,compositeBackground:h,compositeTitleBackground:c,nodeBorder:d}=n,u=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-id",e.id).attr("data-look",e.look),g=u.insert("g",":first-child"),f=u.insert("g").attr("class","cluster-label"),p=u.append("rect"),y=f.node().appendChild(await td(e.label,e.labelStyle,void 0,!0)),m=y.getBBox();if((0,r.evaluate)(l.flowchart.htmlLabels)){let t=y.children[0],e=(0,s.select)(y);m=t.getBoundingClientRect(),e.attr("width",m.width),e.attr("height",m.height)}let x=0*e.padding,w=(e.width<=m.width+e.padding?m.width+e.padding:e.width)+x;e.width<=m.width+e.padding?e.diff=(w-e.width)/2-e.padding:e.diff=-e.padding;let b=e.height+x,v=e.height+x-m.height-6,k=e.x-w/2,M=e.y-b/2;e.width=w;let _=e.y-e.height/2-x/2+m.height+2;if("handDrawn"===e.look){let t=e.cssClasses.includes("statediagram-cluster-alt"),l=tt.svg(u),n=e.rx||e.ry?l.path(tu(k,M,w,b,10),{roughness:.7,fill:c,fillStyle:"solid",stroke:d,seed:i}):l.rectangle(k,M,w,b,{seed:i});a=u.insert(()=>n,":first-child");let r=l.rectangle(k,_,w,v,{fill:t?o:h,fillStyle:t?"hachure":"solid",stroke:d,seed:i});a=u.insert(()=>n,":first-child"),p=u.insert(()=>r)}else(a=g.insert("rect",":first-child")).attr("class","outer").attr("x",k).attr("y",M).attr("width",w).attr("height",b).attr("data-look",e.look),p.attr("class","inner").attr("x",k).attr("y",_).attr("width",w).attr("height",v);return f.attr("transform","translate(".concat(e.x-m.width/2,", ").concat(M+1-3*!(0,r.evaluate)(l.flowchart.htmlLabels),")")),e.height=a.node().getBBox().height,e.offsetX=0,e.offsetY=m.height-e.padding/2,e.labelBBox=m,e.intersect=function(t){return to(e,t)},{cluster:u,labelBBox:m}},"roundedWithTitle"),tk=(0,r.__name)(async(t,e)=>{let l;r.log.info("Creating subgraph rect for ",e.id,e);let i=(0,r.getConfig2)(),{themeVariables:o,handDrawnSeed:h}=i,{clusterBkg:c,clusterBorder:d}=o,{labelStyles:u,nodeStyles:g,borderStyles:f,backgroundStyles:p}=tm(e),y=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),m=(0,r.evaluate)(i.flowchart.htmlLabels),x=y.insert("g").attr("class","cluster-label "),w=await (0,n.createText)(x,e.label,{style:e.labelStyle,useHtmlLabels:m,isNode:!0,width:e.width}),b=w.getBBox();if((0,r.evaluate)(i.flowchart.htmlLabels)){let t=w.children[0],e=(0,s.select)(w);b=t.getBoundingClientRect(),e.attr("width",b.width),e.attr("height",b.height)}let v=e.width<=b.width+e.padding?b.width+e.padding:e.width;e.width<=b.width+e.padding?e.diff=(v-e.width)/2-e.padding:e.diff=-e.padding;let k=e.height,M=e.x-v/2,_=e.y-k/2;if(r.log.trace("Data ",e,JSON.stringify(e)),"handDrawn"===e.look){let t=tt.svg(y),a=tx(e,{roughness:.7,fill:c,stroke:d,fillWeight:4,seed:h}),n=t.path(tu(M,_,v,k,e.rx),a);(l=y.insert(()=>(r.log.debug("Rough node insert CXC",n),n),":first-child")).select("path:nth-child(2)").attr("style",f.join(";")),l.select("path").attr("style",p.join(";").replace("fill","stroke"))}else(l=y.insert("rect",":first-child")).attr("style",g).attr("rx",e.rx).attr("ry",e.ry).attr("x",M).attr("y",_).attr("width",v).attr("height",k);let{subGraphTitleTopMargin:S}=(0,a.getSubGraphTitleMargins)(i);if(x.attr("transform","translate(".concat(e.x-b.width/2,", ").concat(e.y-e.height/2+S,")")),u){let t=x.select("span");t&&t.attr("style",u)}let D=l.node().getBBox();return e.offsetX=0,e.width=D.width,e.height=D.height,e.offsetY=b.height-e.padding/2,e.intersect=function(t){return to(e,t)},{cluster:y,labelBBox:b}},"kanbanSection"),tM={rect:tw,squareRect:tw,roundedWithTitle:tv,noteGroup:tb,divider:(0,r.__name)((t,e)=>{let a,{themeVariables:l,handDrawnSeed:n}=(0,r.getConfig2)(),{nodeBorder:i}=l,s=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-look",e.look),o=s.insert("g",":first-child"),h=0*e.padding,c=e.width+h;e.diff=-e.padding;let d=e.height+h,u=e.x-c/2,g=e.y-d/2;if(e.width=c,"handDrawn"===e.look){let t=tt.svg(s).rectangle(u,g,c,d,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:i,seed:n});a=s.insert(()=>t,":first-child")}else(a=o.insert("rect",":first-child")).attr("class","divider").attr("x",u).attr("y",g).attr("width",c).attr("height",d).attr("data-look",e.look);return e.height=a.node().getBBox().height,e.offsetX=0,e.offsetY=0,e.intersect=function(t){return to(e,t)},{cluster:s,labelBBox:{}}},"divider"),kanbanSection:tk},t_=new Map,tS=(0,r.__name)(async(t,e)=>{let a=e.shape||"rect",l=await tM[a](t,e);return t_.set(e.id,l),l},"insertCluster"),tD=(0,r.__name)(()=>{t_=new Map},"clear");function tC(t,e,a,l){var n=t.x,i=t.y,r=n-l.x,s=i-l.y,o=Math.sqrt(e*e*s*s+a*a*r*r),h=Math.abs(e*a*r/o);l.x<n&&(h=-h);var c=Math.abs(e*a*s/o);return l.y<i&&(c=-c),{x:n+h,y:i+c}}function tA(t,e,a){return tC(t,e,e,a)}function tP(t,e,a,l){var n,i,r,s,o,h,c,d,u,g,f,p,y;if(n=e.y-t.y,r=t.x-e.x,o=e.x*t.y-t.x*e.y,u=n*a.x+r*a.y+o,g=n*l.x+r*l.y+o,!(0!==u&&0!==g&&tL(u,g))){if((i=l.y-a.y,s=a.x-l.x,h=l.x*a.y-a.x*l.y,c=i*t.x+s*t.y+h,d=i*e.x+s*e.y+h,!(0!==c&&0!==d&&tL(c,d)))&&0!=(f=n*s-i*r))return p=Math.abs(f/2),{x:(y=r*h-s*o)<0?(y-p)/f:(y+p)/f,y:(y=i*o-n*h)<0?(y-p)/f:(y+p)/f}}}function tL(t,e){return t*e>0}function tB(t,e,a){let l=t.x,n=t.y,i=[],r=1/0,s=1/0;"function"==typeof e.forEach?e.forEach(function(t){r=Math.min(r,t.x),s=Math.min(s,t.y)}):(r=Math.min(r,e.x),s=Math.min(s,e.y));let o=l-t.width/2-r,h=n-t.height/2-s;for(let l=0;l<e.length;l++){let n=e[l],r=e[l<e.length-1?l+1:0],s=tP(t,a,{x:o+n.x,y:h+n.y},{x:o+r.x,y:h+r.y});s&&i.push(s)}return i.length?(i.length>1&&i.sort(function(t,e){let l=t.x-a.x,n=t.y-a.y,i=Math.sqrt(l*l+n*n),r=e.x-a.x,s=e.y-a.y,o=Math.sqrt(r*r+s*s);return i<o?-1:+(i!==o)}),i[0]):t}(0,r.__name)(function(t,e){return t.intersect(e)},"intersectNode"),(0,r.__name)(tC,"intersectEllipse"),(0,r.__name)(tA,"intersectCircle"),(0,r.__name)(tP,"intersectLine"),(0,r.__name)(tL,"sameSign"),(0,r.__name)(tB,"intersectPolygon");var tN={circle:tA,polygon:tB,rect:to};function tT(t,e){let{labelStyles:a}=tm(e);e.labelStyle=a;let l=tn(e),n=l;l||(n="anchor");let s=t.insert("g").attr("class",n).attr("id",e.domId||e.id),{cssStyles:o}=e,h=tt.svg(s),c=tx(e,{fill:"black",stroke:"none",fillStyle:"solid"});"handDrawn"!==e.look&&(c.roughness=0);let d=h.circle(0,0,2,c),u=s.insert(()=>d,":first-child");return u.attr("class","anchor").attr("style",(0,i.handleUndefinedAttr)(o)),tl(e,u),e.intersect=function(t){return r.log.info("Circle intersect",e,1,t),tN.circle(e,1,t)},s}function tR(t,e,a,l,n,i,r){let s=Math.atan2(l-e,a-t),o=Math.sqrt(((a-t)/2/n)**2+((l-e)/2/i)**2);if(o>1)throw Error("The given radii are too small to create an arc between the points.");let h=Math.sqrt(1-o**2),c=(t+a)/2+h*i*Math.sin(s)*(r?-1:1),d=(e+l)/2-h*n*Math.cos(s)*(r?-1:1),u=Math.atan2((e-d)/i,(t-c)/n),g=Math.atan2((l-d)/i,(a-c)/n)-u;r&&g<0&&(g+=2*Math.PI),!r&&g>0&&(g-=2*Math.PI);let f=[];for(let t=0;t<20;t++){let e=u+t/19*g,a=c+n*Math.cos(e),l=d+i*Math.sin(e);f.push({x:a,y:l})}return f}async function tI(t,e){let{labelStyles:a,nodeStyles:l}=tm(e);e.labelStyle=a;let{shapeSvg:n,bbox:i}=await te(t,e,tn(e)),r=i.width+e.padding+20,s=i.height+e.padding,o=s/2,h=o/(2.5+s/50),{cssStyles:c}=e,d=[{x:r/2,y:-s/2},{x:-r/2,y:-s/2},...tR(-r/2,-s/2,-r/2,s/2,h,o,!1),{x:r/2,y:s/2},...tR(r/2,s/2,r/2,-s/2,h,o,!0)],u=tt.svg(n),g=tx(e,{});"handDrawn"!==e.look&&(g.roughness=0,g.fillStyle="solid");let f=ti(d),p=u.path(f,g),y=n.insert(()=>p,":first-child");return y.attr("class","basic label-container"),c&&"handDrawn"!==e.look&&y.selectAll("path").attr("style",c),l&&"handDrawn"!==e.look&&y.selectAll("path").attr("style",l),y.attr("transform","translate(".concat(h/2,", 0)")),tl(e,y),e.intersect=function(t){return tN.polygon(e,d,t)},n}function tO(t,e,a,l){return t.insert("polygon",":first-child").attr("points",l.map(function(t){return t.x+","+t.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+a/2+")")}async function tW(t,e){let a,{labelStyles:l,nodeStyles:n}=tm(e);e.labelStyle=l;let{shapeSvg:i,bbox:r}=await te(t,e,tn(e)),s=r.height+e.padding,o=r.width+e.padding+12,h=-s,c=[{x:12,y:h},{x:o,y:h},{x:o,y:0},{x:0,y:0},{x:0,y:h+12},{x:12,y:h}],{cssStyles:d}=e;if("handDrawn"===e.look){let t=tt.svg(i),l=tx(e,{}),n=ti(c),r=t.path(n,l);a=i.insert(()=>r,":first-child").attr("transform","translate(".concat(-o/2,", ").concat(s/2,")")),d&&a.attr("style",d)}else a=tO(i,o,s,c);return n&&a.attr("style",n),tl(e,a),e.intersect=function(t){return tN.polygon(e,c,t)},i}function tE(t,e){var a,l;let{nodeStyles:n}=tm(e);e.label="";let i=t.insert("g").attr("class",tn(e)).attr("id",null!=(a=e.domId)?a:e.id),{cssStyles:r}=e,s=Math.max(28,null!=(l=e.width)?l:0),o=[{x:0,y:s/2},{x:s/2,y:0},{x:0,y:-s/2},{x:-s/2,y:0}],h=tt.svg(i),c=tx(e,{});"handDrawn"!==e.look&&(c.roughness=0,c.fillStyle="solid");let d=ti(o),u=h.path(d,c),g=i.insert(()=>u,":first-child");return r&&"handDrawn"!==e.look&&g.selectAll("path").attr("style",r),n&&"handDrawn"!==e.look&&g.selectAll("path").attr("style",n),e.width=28,e.height=28,e.intersect=function(t){return tN.polygon(e,o,t)},i}async function tj(t,e){let a,{labelStyles:l,nodeStyles:n}=tm(e);e.labelStyle=l;let{shapeSvg:s,bbox:o,halfPadding:h}=await te(t,e,tn(e)),c=o.width/2+h,{cssStyles:d}=e;if("handDrawn"===e.look){let t=tt.svg(s),l=tx(e,{}),n=t.circle(0,0,2*c,l);(a=s.insert(()=>n,":first-child")).attr("class","basic label-container").attr("style",(0,i.handleUndefinedAttr)(d))}else a=s.insert("circle",":first-child").attr("class","basic label-container").attr("style",n).attr("r",c).attr("cx",0).attr("cy",0);return tl(e,a),e.intersect=function(t){return r.log.info("Circle intersect",e,c,t),tN.circle(e,c,t)},s}function tz(t){let e=Math.cos(Math.PI/4),a=Math.sin(Math.PI/4),l=2*t,n={x:l/2*e,y:l/2*a},i={x:-(l/2)*e,y:l/2*a},r={x:-(l/2)*e,y:-(l/2)*a},s={x:l/2*e,y:-(l/2)*a};return"M ".concat(i.x,",").concat(i.y," L ").concat(s.x,",").concat(s.y,"\n                   M ").concat(n.x,",").concat(n.y," L ").concat(r.x,",").concat(r.y)}function tH(t,e){var a,l;let{labelStyles:n,nodeStyles:i}=tm(e);e.labelStyle=n,e.label="";let s=t.insert("g").attr("class",tn(e)).attr("id",null!=(a=e.domId)?a:e.id),o=Math.max(30,null!=(l=null==e?void 0:e.width)?l:0),{cssStyles:h}=e,c=tt.svg(s),d=tx(e,{});"handDrawn"!==e.look&&(d.roughness=0,d.fillStyle="solid");let u=c.circle(0,0,2*o,d),g=tz(o),f=c.path(g,d),p=s.insert(()=>u,":first-child");return p.insert(()=>f),h&&"handDrawn"!==e.look&&p.selectAll("path").attr("style",h),i&&"handDrawn"!==e.look&&p.selectAll("path").attr("style",i),tl(e,p),e.intersect=function(t){return r.log.info("crossedCircle intersect",e,{radius:o,point:t}),tN.circle(e,o,t)},s}function tq(t,e,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:180,r=[],s=n*Math.PI/180,o=(i*Math.PI/180-s)/(l-1);for(let n=0;n<l;n++){let l=s+n*o,i=t+a*Math.cos(l),h=e+a*Math.sin(l);r.push({x:-i,y:-h})}return r}async function tF(t,e){var a,l,n,i,r;let{labelStyles:s,nodeStyles:o}=tm(e);e.labelStyle=s;let{shapeSvg:h,bbox:c,label:d}=await te(t,e,tn(e)),u=c.width+(null!=(a=e.padding)?a:0),g=c.height+(null!=(l=e.padding)?l:0),f=Math.max(5,.1*g),{cssStyles:p}=e,y=[...tq(u/2,-g/2,f,30,-90,0),{x:-u/2-f,y:f},...tq(u/2+2*f,-f,f,20,-180,-270),...tq(u/2+2*f,f,f,20,-90,-180),{x:-u/2-f,y:-g/2},...tq(u/2,g/2,f,20,0,90)],m=[{x:u/2,y:-g/2-f},{x:-u/2,y:-g/2-f},...tq(u/2,-g/2,f,20,-90,0),{x:-u/2-f,y:-f},...tq(u/2+.1*u,-f,f,20,-180,-270),...tq(u/2+.1*u,f,f,20,-90,-180),{x:-u/2-f,y:g/2},...tq(u/2,g/2,f,20,0,90),{x:-u/2,y:g/2+f},{x:u/2,y:g/2+f}],x=tt.svg(h),w=tx(e,{fill:"none"});"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid");let b=ti(y).replace("Z",""),v=x.path(b,w),k=ti(m),M=x.path(k,{...w}),_=h.insert("g",":first-child");return _.insert(()=>M,":first-child").attr("stroke-opacity",0),_.insert(()=>v,":first-child"),_.attr("class","text"),p&&"handDrawn"!==e.look&&_.selectAll("path").attr("style",p),o&&"handDrawn"!==e.look&&_.selectAll("path").attr("style",o),_.attr("transform","translate(".concat(f,", 0)")),d.attr("transform","translate(".concat(-u/2+f-(c.x-(null!=(n=c.left)?n:0)),",").concat(-g/2+(null!=(i=e.padding)?i:0)/2-(c.y-(null!=(r=c.top)?r:0)),")")),tl(e,_),e.intersect=function(t){return tN.polygon(e,m,t)},h}function tG(t,e,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:180,r=[],s=n*Math.PI/180,o=(i*Math.PI/180-s)/(l-1);for(let n=0;n<l;n++){let l=s+n*o,i=t+a*Math.cos(l),h=e+a*Math.sin(l);r.push({x:i,y:h})}return r}async function tV(t,e){var a,l,n,i,r,s;let{labelStyles:o,nodeStyles:h}=tm(e);e.labelStyle=o;let{shapeSvg:c,bbox:d,label:u}=await te(t,e,tn(e)),g=d.width+(null!=(a=e.padding)?a:0),f=d.height+(null!=(l=e.padding)?l:0),p=Math.max(5,.1*f),{cssStyles:y}=e,m=[...tG(g/2,-f/2,p,20,-90,0),{x:g/2+p,y:-p},...tG(g/2+2*p,-p,p,20,-180,-270),...tG(g/2+2*p,p,p,20,-90,-180),{x:g/2+p,y:f/2},...tG(g/2,f/2,p,20,0,90)],x=[{x:-g/2,y:-f/2-p},{x:g/2,y:-f/2-p},...tG(g/2,-f/2,p,20,-90,0),{x:g/2+p,y:-p},...tG(g/2+2*p,-p,p,20,-180,-270),...tG(g/2+2*p,p,p,20,-90,-180),{x:g/2+p,y:f/2},...tG(g/2,f/2,p,20,0,90),{x:g/2,y:f/2+p},{x:-g/2,y:f/2+p}],w=tt.svg(c),b=tx(e,{fill:"none"});"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");let v=ti(m).replace("Z",""),k=w.path(v,b),M=ti(x),_=w.path(M,{...b}),S=c.insert("g",":first-child");return S.insert(()=>_,":first-child").attr("stroke-opacity",0),S.insert(()=>k,":first-child"),S.attr("class","text"),y&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",y),h&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",h),S.attr("transform","translate(".concat(-p,", 0)")),u.attr("transform","translate(".concat(-g/2+(null!=(n=e.padding)?n:0)/2-(d.x-(null!=(i=d.left)?i:0)),",").concat(-f/2+(null!=(r=e.padding)?r:0)/2-(d.y-(null!=(s=d.top)?s:0)),")")),tl(e,S),e.intersect=function(t){return tN.polygon(e,x,t)},c}function tU(t,e,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:180,r=[],s=n*Math.PI/180,o=(i*Math.PI/180-s)/(l-1);for(let n=0;n<l;n++){let l=s+n*o,i=t+a*Math.cos(l),h=e+a*Math.sin(l);r.push({x:-i,y:-h})}return r}async function tZ(t,e){var a,l,n,i,r,s;let{labelStyles:o,nodeStyles:h}=tm(e);e.labelStyle=o;let{shapeSvg:c,bbox:d,label:u}=await te(t,e,tn(e)),g=d.width+(null!=(a=e.padding)?a:0),f=d.height+(null!=(l=e.padding)?l:0),p=Math.max(5,.1*f),{cssStyles:y}=e,m=[...tU(g/2,-f/2,p,30,-90,0),{x:-g/2-p,y:p},...tU(g/2+2*p,-p,p,20,-180,-270),...tU(g/2+2*p,p,p,20,-90,-180),{x:-g/2-p,y:-f/2},...tU(g/2,f/2,p,20,0,90)],x=[...tU(-g/2+p+p/2,-f/2,p,20,-90,-180),{x:g/2-p/2,y:p},...tU(-g/2-p/2,-p,p,20,0,90),...tU(-g/2-p/2,p,p,20,-90,0),{x:g/2-p/2,y:-p},...tU(-g/2+p+p/2,f/2,p,30,-180,-270)],w=[{x:g/2,y:-f/2-p},{x:-g/2,y:-f/2-p},...tU(g/2,-f/2,p,20,-90,0),{x:-g/2-p,y:-p},...tU(g/2+2*p,-p,p,20,-180,-270),...tU(g/2+2*p,p,p,20,-90,-180),{x:-g/2-p,y:f/2},...tU(g/2,f/2,p,20,0,90),{x:-g/2,y:f/2+p},{x:g/2-p-p/2,y:f/2+p},...tU(-g/2+p+p/2,-f/2,p,20,-90,-180),{x:g/2-p/2,y:p},...tU(-g/2-p/2,-p,p,20,0,90),...tU(-g/2-p/2,p,p,20,-90,0),{x:g/2-p/2,y:-p},...tU(-g/2+p+p/2,f/2,p,30,-180,-270)],b=tt.svg(c),v=tx(e,{fill:"none"});"handDrawn"!==e.look&&(v.roughness=0,v.fillStyle="solid");let k=ti(m).replace("Z",""),M=b.path(k,v),_=ti(x).replace("Z",""),S=b.path(_,v),D=ti(w),C=b.path(D,{...v}),A=c.insert("g",":first-child");return A.insert(()=>C,":first-child").attr("stroke-opacity",0),A.insert(()=>M,":first-child"),A.insert(()=>S,":first-child"),A.attr("class","text"),y&&"handDrawn"!==e.look&&A.selectAll("path").attr("style",y),h&&"handDrawn"!==e.look&&A.selectAll("path").attr("style",h),A.attr("transform","translate(".concat(p-p/4,", 0)")),u.attr("transform","translate(".concat(-g/2+(null!=(n=e.padding)?n:0)/2-(d.x-(null!=(i=d.left)?i:0)),",").concat(-f/2+(null!=(r=e.padding)?r:0)/2-(d.y-(null!=(s=d.top)?s:0)),")")),tl(e,A),e.intersect=function(t){return tN.polygon(e,w,t)},c}async function tX(t,e){var a,l,n,i;let{labelStyles:r,nodeStyles:s}=tm(e);e.labelStyle=r;let{shapeSvg:o,bbox:h}=await te(t,e,tn(e)),c=Math.max(80,(h.width+(null!=(a=e.padding)?a:0)*2)*1.25,null!=(l=null==e?void 0:e.width)?l:0),d=Math.max(20,h.height+(null!=(n=e.padding)?n:0)*2,null!=(i=null==e?void 0:e.height)?i:0),u=d/2,{cssStyles:g}=e,f=tt.svg(o),p=tx(e,{});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let y=c-u,m=d/4,x=[{x:y,y:0},{x:m,y:0},{x:0,y:d/2},{x:m,y:d},{x:y,y:d},...ts(-y,-d/2,u,50,270,90)],w=ti(x),b=f.path(w,p),v=o.insert(()=>b,":first-child");return v.attr("class","basic label-container"),g&&"handDrawn"!==e.look&&v.selectChildren("path").attr("style",g),s&&"handDrawn"!==e.look&&v.selectChildren("path").attr("style",s),v.attr("transform","translate(".concat(-c/2,", ").concat(-d/2,")")),tl(e,v),e.intersect=function(t){return tN.polygon(e,x,t)},o}(0,r.__name)(tT,"anchor"),(0,r.__name)(tR,"generateArcPoints"),(0,r.__name)(tI,"bowTieRect"),(0,r.__name)(tO,"insertPolygonShape"),(0,r.__name)(tW,"card"),(0,r.__name)(tE,"choice"),(0,r.__name)(tj,"circle"),(0,r.__name)(tz,"createLine"),(0,r.__name)(tH,"crossedCircle"),(0,r.__name)(tq,"generateCirclePoints"),(0,r.__name)(tF,"curlyBraceLeft"),(0,r.__name)(tG,"generateCirclePoints"),(0,r.__name)(tV,"curlyBraceRight"),(0,r.__name)(tU,"generateCirclePoints"),(0,r.__name)(tZ,"curlyBraces"),(0,r.__name)(tX,"curvedTrapezoid");var tQ=(0,r.__name)((t,e,a,l,n,i)=>["M".concat(t,",").concat(e+i),"a".concat(n,",").concat(i," 0,0,0 ").concat(a,",0"),"a".concat(n,",").concat(i," 0,0,0 ").concat(-a,",0"),"l0,".concat(l),"a".concat(n,",").concat(i," 0,0,0 ").concat(a,",0"),"l0,".concat(-l)].join(" "),"createCylinderPathD"),tY=(0,r.__name)((t,e,a,l,n,i)=>["M".concat(t,",").concat(e+i),"M".concat(t+a,",").concat(e+i),"a".concat(n,",").concat(i," 0,0,0 ").concat(-a,",0"),"l0,".concat(l),"a".concat(n,",").concat(i," 0,0,0 ").concat(a,",0"),"l0,".concat(-l)].join(" "),"createOuterCylinderPathD"),tJ=(0,r.__name)((t,e,a,l,n,i)=>["M".concat(t-a/2,",").concat(-l/2),"a".concat(n,",").concat(i," 0,0,0 ").concat(a,",0")].join(" "),"createInnerCylinderPathD");async function tK(t,e){var a,l,n,r,s;let o,{labelStyles:h,nodeStyles:c}=tm(e);e.labelStyle=h;let{shapeSvg:d,bbox:u,label:g}=await te(t,e,tn(e)),f=Math.max(u.width+e.padding,null!=(a=e.width)?a:0),p=f/2,y=p/(2.5+f/50),m=Math.max(u.height+y+e.padding,null!=(l=e.height)?l:0),{cssStyles:x}=e;if("handDrawn"===e.look){let t=tt.svg(d),a=tY(0,0,f,m,p,y),l=tJ(0,y,f,m,p,y),n=t.path(a,tx(e,{})),i=t.path(l,tx(e,{fill:"none"}));o=d.insert(()=>i,":first-child"),(o=d.insert(()=>n,":first-child")).attr("class","basic label-container"),x&&o.attr("style",x)}else{let t=tQ(0,0,f,m,p,y);o=d.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,i.handleUndefinedAttr)(x)).attr("style",c)}return o.attr("label-offset-y",y),o.attr("transform","translate(".concat(-f/2,", ").concat(-(m/2+y),")")),tl(e,o),g.attr("transform","translate(".concat(-(u.width/2)-(u.x-(null!=(n=u.left)?n:0)),", ").concat(-(u.height/2)+(null!=(r=e.padding)?r:0)/1.5-(u.y-(null!=(s=u.top)?s:0)),")")),e.intersect=function(t){var a,l,n,i,r,s;let o=tN.rect(e,t),h=o.x-(null!=(a=e.x)?a:0);if(0!=p&&(Math.abs(h)<(null!=(l=e.width)?l:0)/2||Math.abs(h)==(null!=(n=e.width)?n:0)/2&&Math.abs(o.y-(null!=(i=e.y)?i:0))>(null!=(r=e.height)?r:0)/2-y)){let a=y*y*(1-h*h/(p*p));a>0&&(a=Math.sqrt(a)),a=y-a,t.y-(null!=(s=e.y)?s:0)>0&&(a=-a),o.y+=a}return o},d}async function t$(t,e){var a,l,n,i;let{labelStyles:r,nodeStyles:s}=tm(e);e.labelStyle=r;let{shapeSvg:o,bbox:h,label:c}=await te(t,e,tn(e)),d=h.width+e.padding,u=h.height+e.padding,g=.2*u,f=-d/2,p=-u/2-g/2,{cssStyles:y}=e,m=tt.svg(o),x=tx(e,{});"handDrawn"!==e.look&&(x.roughness=0,x.fillStyle="solid");let w=m.polygon([{x:f,y:p+g},{x:-f,y:p+g},{x:-f,y:-p},{x:f,y:-p},{x:f,y:p},{x:-f,y:p},{x:-f,y:p+g}].map(t=>[t.x,t.y]),x),b=o.insert(()=>w,":first-child");return b.attr("class","basic label-container"),y&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",y),s&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",s),c.attr("transform","translate(".concat(f+(null!=(a=e.padding)?a:0)/2-(h.x-(null!=(l=h.left)?l:0)),", ").concat(p+g+(null!=(n=e.padding)?n:0)/2-(h.y-(null!=(i=h.top)?i:0)),")")),tl(e,b),e.intersect=function(t){return tN.rect(e,t)},o}async function t0(t,e){let a,{labelStyles:l,nodeStyles:n}=tm(e);e.labelStyle=l;let{shapeSvg:s,bbox:o,halfPadding:h}=await te(t,e,tn(e)),c=o.width/2+h+5,d=o.width/2+h,{cssStyles:u}=e;if("handDrawn"===e.look){var g,f;let t=tt.svg(s),l=tx(e,{roughness:.2,strokeWidth:2.5}),n=tx(e,{roughness:.2,strokeWidth:1.5}),r=t.circle(0,0,2*c,l),o=t.circle(0,0,2*d,n);(a=s.insert("g",":first-child")).attr("class",(0,i.handleUndefinedAttr)(e.cssClasses)).attr("style",(0,i.handleUndefinedAttr)(u)),null==(g=a.node())||g.appendChild(r),null==(f=a.node())||f.appendChild(o)}else{let t=(a=s.insert("g",":first-child")).insert("circle",":first-child"),e=a.insert("circle");a.attr("class","basic label-container").attr("style",n),t.attr("class","outer-circle").attr("style",n).attr("r",c).attr("cx",0).attr("cy",0),e.attr("class","inner-circle").attr("style",n).attr("r",d).attr("cx",0).attr("cy",0)}return tl(e,a),e.intersect=function(t){return r.log.info("DoubleCircle intersect",e,c,t),tN.circle(e,c,t)},s}function t2(t,e,a){var l;let{config:{themeVariables:n}}=a,{labelStyles:i,nodeStyles:s}=tm(e);e.label="",e.labelStyle=i;let o=t.insert("g").attr("class",tn(e)).attr("id",null!=(l=e.domId)?l:e.id),{cssStyles:h}=e,c=tt.svg(o),{nodeBorder:d}=n,u=tx(e,{fillStyle:"solid"});"handDrawn"!==e.look&&(u.roughness=0);let g=c.circle(0,0,14,u),f=o.insert(()=>g,":first-child");return f.selectAll("path").attr("style","fill: ".concat(d," !important;")),h&&h.length>0&&"handDrawn"!==e.look&&f.selectAll("path").attr("style",h),s&&"handDrawn"!==e.look&&f.selectAll("path").attr("style",s),tl(e,f),e.intersect=function(t){return r.log.info("filledCircle intersect",e,{radius:7,point:t}),tN.circle(e,7,t)},o}async function t1(t,e){var a,l,n,i;let{labelStyles:s,nodeStyles:o}=tm(e);e.labelStyle=s;let{shapeSvg:h,bbox:c,label:d}=await te(t,e,tn(e)),u=c.width+(null!=(a=e.padding)?a:0),g=u+c.height,f=u+c.height,p=[{x:0,y:-g},{x:f,y:-g},{x:f/2,y:0}],{cssStyles:y}=e,m=tt.svg(h),x=tx(e,{});"handDrawn"!==e.look&&(x.roughness=0,x.fillStyle="solid");let w=ti(p),b=m.path(w,x),v=h.insert(()=>b,":first-child").attr("transform","translate(".concat(-g/2,", ").concat(g/2,")"));return y&&"handDrawn"!==e.look&&v.selectChildren("path").attr("style",y),o&&"handDrawn"!==e.look&&v.selectChildren("path").attr("style",o),e.width=u,e.height=g,tl(e,v),d.attr("transform","translate(".concat(-c.width/2-(c.x-(null!=(l=c.left)?l:0)),", ").concat(-g/2+(null!=(n=e.padding)?n:0)/2+(c.y-(null!=(i=c.top)?i:0)),")")),e.intersect=function(t){return r.log.info("Triangle intersect",e,p,t),tN.polygon(e,p,t)},h}function t5(t,e,a){var l,n,i,r,s,o;let{dir:h,config:{state:c,themeVariables:d}}=a,{nodeStyles:u}=tm(e);e.label="";let g=t.insert("g").attr("class",tn(e)).attr("id",null!=(l=e.domId)?l:e.id),{cssStyles:f}=e,p=Math.max(70,null!=(n=null==e?void 0:e.width)?n:0),y=Math.max(10,null!=(i=null==e?void 0:e.height)?i:0);"LR"===h&&(p=Math.max(10,null!=(r=null==e?void 0:e.width)?r:0),y=Math.max(70,null!=(s=null==e?void 0:e.height)?s:0));let m=-1*p/2,x=-1*y/2,w=tt.svg(g),b=tx(e,{stroke:d.lineColor,fill:d.lineColor});"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");let v=w.rectangle(m,x,p,y,b),k=g.insert(()=>v,":first-child");f&&"handDrawn"!==e.look&&k.selectAll("path").attr("style",f),u&&"handDrawn"!==e.look&&k.selectAll("path").attr("style",u),tl(e,k);let M=null!=(o=null==c?void 0:c.padding)?o:0;return e.width&&e.height&&(e.width+=M/2||0,e.height+=M/2||0),e.intersect=function(t){return tN.rect(e,t)},g}async function t3(t,e){var a,l,n,i;let{labelStyles:s,nodeStyles:o}=tm(e);e.labelStyle=s;let{shapeSvg:h,bbox:c}=await te(t,e,tn(e)),d=Math.max(80,c.width+(null!=(a=e.padding)?a:0)*2,null!=(l=null==e?void 0:e.width)?l:0),u=Math.max(50,c.height+(null!=(n=e.padding)?n:0)*2,null!=(i=null==e?void 0:e.height)?i:0),g=u/2,{cssStyles:f}=e,p=tt.svg(h),y=tx(e,{});"handDrawn"!==e.look&&(y.roughness=0,y.fillStyle="solid");let m=[{x:-d/2,y:-u/2},{x:d/2-g,y:-u/2},...ts(-d/2+g,0,g,50,90,270),{x:d/2-g,y:u/2},{x:-d/2,y:u/2}],x=ti(m),w=p.path(x,y),b=h.insert(()=>w,":first-child");return b.attr("class","basic label-container"),f&&"handDrawn"!==e.look&&b.selectChildren("path").attr("style",f),o&&"handDrawn"!==e.look&&b.selectChildren("path").attr("style",o),tl(e,b),e.intersect=function(t){return r.log.info("Pill intersect",e,{radius:g,point:t}),tN.polygon(e,m,t)},h}(0,r.__name)(tK,"cylinder"),(0,r.__name)(t$,"dividedRectangle"),(0,r.__name)(t0,"doublecircle"),(0,r.__name)(t2,"filledCircle"),(0,r.__name)(t1,"flippedTriangle"),(0,r.__name)(t5,"forkJoin"),(0,r.__name)(t3,"halfRoundedRectangle");var t4=(0,r.__name)((t,e,a,l,n)=>["M".concat(t+n,",").concat(e),"L".concat(t+a-n,",").concat(e),"L".concat(t+a,",").concat(e-l/2),"L".concat(t+a-n,",").concat(e-l),"L".concat(t+n,",").concat(e-l),"L".concat(t,",").concat(e-l/2),"Z"].join(" "),"createHexagonPathD");async function t8(t,e){let a,{labelStyles:l,nodeStyles:n}=tm(e);e.labelStyle=l;let{shapeSvg:i,bbox:r}=await te(t,e,tn(e)),s=r.height+e.padding,o=s/4,h=r.width+2*o+e.padding,c=[{x:o,y:0},{x:h-o,y:0},{x:h,y:-s/2},{x:h-o,y:-s},{x:o,y:-s},{x:0,y:-s/2}],{cssStyles:d}=e;if("handDrawn"===e.look){let t=tt.svg(i),l=tx(e,{}),n=t4(0,0,h,s,o),r=t.path(n,l);a=i.insert(()=>r,":first-child").attr("transform","translate(".concat(-h/2,", ").concat(s/2,")")),d&&a.attr("style",d)}else a=tO(i,h,s,c);return n&&a.attr("style",n),e.width=h,e.height=s,tl(e,a),e.intersect=function(t){return tN.polygon(e,c,t)},i}async function t9(t,e){var a,l;let{labelStyles:n,nodeStyles:i}=tm(e);e.label="",e.labelStyle=n;let{shapeSvg:s}=await te(t,e,tn(e)),o=Math.max(30,null!=(a=null==e?void 0:e.width)?a:0),h=Math.max(30,null!=(l=null==e?void 0:e.height)?l:0),{cssStyles:c}=e,d=tt.svg(s),u=tx(e,{});"handDrawn"!==e.look&&(u.roughness=0,u.fillStyle="solid");let g=[{x:0,y:0},{x:o,y:0},{x:0,y:h},{x:o,y:h}],f=ti(g),p=d.path(f,u),y=s.insert(()=>p,":first-child");return y.attr("class","basic label-container"),c&&"handDrawn"!==e.look&&y.selectChildren("path").attr("style",c),i&&"handDrawn"!==e.look&&y.selectChildren("path").attr("style",i),y.attr("transform","translate(".concat(-o/2,", ").concat(-h/2,")")),tl(e,y),e.intersect=function(t){return r.log.info("Pill intersect",e,{points:g}),tN.polygon(e,g,t)},s}async function t6(t,e,a){var n,i,s,o;let{config:{themeVariables:h,flowchart:c}}=a,{labelStyles:d}=tm(e);e.labelStyle=d;let u=Math.max(null!=(n=e.assetHeight)?n:48,null!=(i=e.assetWidth)?i:48),g=null==c?void 0:c.wrappingWidth;e.width=Math.max(u,null!=g?g:0);let{shapeSvg:f,bbox:p,label:y}=await te(t,e,"icon-shape default"),m="t"===e.pos,{nodeBorder:x}=h,{stylesMap:w}=tf(e),b=-u/2,v=-u/2,k=8*!!e.label,M=tt.svg(f),_=tx(e,{stroke:"none",fill:"none"});"handDrawn"!==e.look&&(_.roughness=0,_.fillStyle="solid");let S=M.rectangle(b,v,u,u,_),D=Math.max(u,p.width),C=u+p.height+k,A=M.rectangle(-D/2,-C/2,D,C,{..._,fill:"transparent",stroke:"none"}),P=f.insert(()=>S,":first-child"),L=f.insert(()=>A);if(e.icon){let t=f.append("g");t.html("<g>".concat(await (0,l.getIconSVG)(e.icon,{height:u,width:u,fallbackPrefix:""}),"</g>"));let a=t.node().getBBox(),n=a.width,i=a.height,r=a.x,o=a.y;t.attr("transform","translate(".concat(-n/2-r,",").concat(m?p.height/2+k/2-i/2-o:-p.height/2-k/2-i/2-o,")")),t.attr("style","color: ".concat(null!=(s=w.get("stroke"))?s:x,";"))}return y.attr("transform","translate(".concat(-p.width/2-(p.x-(null!=(o=p.left)?o:0)),",").concat(m?-C/2:C/2-p.height,")")),P.attr("transform","translate(".concat(0,",").concat(m?p.height/2+k/2:-p.height/2-k/2,")")),tl(e,L),e.intersect=function(t){var a,l,n;if(r.log.info("iconSquare intersect",e,t),!e.label)return tN.rect(e,t);let i=null!=(a=e.x)?a:0,s=null!=(l=e.y)?l:0,o=null!=(n=e.height)?n:0,h=[];return h=m?[{x:i-p.width/2,y:s-o/2},{x:i+p.width/2,y:s-o/2},{x:i+p.width/2,y:s-o/2+p.height+k},{x:i+u/2,y:s-o/2+p.height+k},{x:i+u/2,y:s+o/2},{x:i-u/2,y:s+o/2},{x:i-u/2,y:s-o/2+p.height+k},{x:i-p.width/2,y:s-o/2+p.height+k}]:[{x:i-u/2,y:s-o/2},{x:i+u/2,y:s-o/2},{x:i+u/2,y:s-o/2+u},{x:i+p.width/2,y:s-o/2+u},{x:i+p.width/2/2,y:s+o/2},{x:i-p.width/2,y:s+o/2},{x:i-p.width/2,y:s-o/2+u},{x:i-u/2,y:s-o/2+u}],tN.polygon(e,h,t)},f}async function t7(t,e,a){var n,i,s,o;let{config:{themeVariables:h,flowchart:c}}=a,{labelStyles:d}=tm(e);e.labelStyle=d;let u=Math.max(null!=(n=e.assetHeight)?n:48,null!=(i=e.assetWidth)?i:48),g=null==c?void 0:c.wrappingWidth;e.width=Math.max(u,null!=g?g:0);let{shapeSvg:f,bbox:p,label:y}=await te(t,e,"icon-shape default"),m=8*!!e.label,x="t"===e.pos,{nodeBorder:w,mainBkg:b}=h,{stylesMap:v}=tf(e),k=tt.svg(f),M=tx(e,{});"handDrawn"!==e.look&&(M.roughness=0,M.fillStyle="solid");let _=v.get("fill");M.stroke=null!=_?_:b;let S=f.append("g");e.icon&&S.html("<g>".concat(await (0,l.getIconSVG)(e.icon,{height:u,width:u,fallbackPrefix:""}),"</g>"));let D=S.node().getBBox(),C=D.width,A=D.height,P=D.x,L=D.y,B=Math.max(C,A)*Math.SQRT2+40,N=k.circle(0,0,B,M),T=Math.max(B,p.width),R=B+p.height+m,I=k.rectangle(-T/2,-R/2,T,R,{...M,fill:"transparent",stroke:"none"}),O=f.insert(()=>N,":first-child"),W=f.insert(()=>I);return S.attr("transform","translate(".concat(-C/2-P,",").concat(x?p.height/2+m/2-A/2-L:-p.height/2-m/2-A/2-L,")")),S.attr("style","color: ".concat(null!=(s=v.get("stroke"))?s:w,";")),y.attr("transform","translate(".concat(-p.width/2-(p.x-(null!=(o=p.left)?o:0)),",").concat(x?-R/2:R/2-p.height,")")),O.attr("transform","translate(".concat(0,",").concat(x?p.height/2+m/2:-p.height/2-m/2,")")),tl(e,W),e.intersect=function(t){return r.log.info("iconSquare intersect",e,t),tN.rect(e,t)},f}async function et(t,e,a){var n,i,s,o;let{config:{themeVariables:h,flowchart:c}}=a,{labelStyles:d}=tm(e);e.labelStyle=d;let u=Math.max(null!=(n=e.assetHeight)?n:48,null!=(i=e.assetWidth)?i:48),g=null==c?void 0:c.wrappingWidth;e.width=Math.max(u,null!=g?g:0);let{shapeSvg:f,bbox:p,halfPadding:y,label:m}=await te(t,e,"icon-shape default"),x="t"===e.pos,w=u+2*y,b=u+2*y,{nodeBorder:v,mainBkg:k}=h,{stylesMap:M}=tf(e),_=8*!!e.label,S=tt.svg(f),D=tx(e,{});"handDrawn"!==e.look&&(D.roughness=0,D.fillStyle="solid");let C=M.get("fill");D.stroke=null!=C?C:k;let A=S.path(tu(-b/2,-w/2,b,w,5),D),P=Math.max(b,p.width),L=w+p.height+_,B=S.rectangle(-P/2,-L/2,P,L,{...D,fill:"transparent",stroke:"none"}),N=f.insert(()=>A,":first-child").attr("class","icon-shape2"),T=f.insert(()=>B);if(e.icon){let t=f.append("g");t.html("<g>".concat(await (0,l.getIconSVG)(e.icon,{height:u,width:u,fallbackPrefix:""}),"</g>"));let a=t.node().getBBox(),n=a.width,i=a.height,r=a.x,o=a.y;t.attr("transform","translate(".concat(-n/2-r,",").concat(x?p.height/2+_/2-i/2-o:-p.height/2-_/2-i/2-o,")")),t.attr("style","color: ".concat(null!=(s=M.get("stroke"))?s:v,";"))}return m.attr("transform","translate(".concat(-p.width/2-(p.x-(null!=(o=p.left)?o:0)),",").concat(x?-L/2:L/2-p.height,")")),N.attr("transform","translate(".concat(0,",").concat(x?p.height/2+_/2:-p.height/2-_/2,")")),tl(e,T),e.intersect=function(t){var a,l,n;if(r.log.info("iconSquare intersect",e,t),!e.label)return tN.rect(e,t);let i=null!=(a=e.x)?a:0,s=null!=(l=e.y)?l:0,o=null!=(n=e.height)?n:0,h=[];return h=x?[{x:i-p.width/2,y:s-o/2},{x:i+p.width/2,y:s-o/2},{x:i+p.width/2,y:s-o/2+p.height+_},{x:i+b/2,y:s-o/2+p.height+_},{x:i+b/2,y:s+o/2},{x:i-b/2,y:s+o/2},{x:i-b/2,y:s-o/2+p.height+_},{x:i-p.width/2,y:s-o/2+p.height+_}]:[{x:i-b/2,y:s-o/2},{x:i+b/2,y:s-o/2},{x:i+b/2,y:s-o/2+w},{x:i+p.width/2,y:s-o/2+w},{x:i+p.width/2/2,y:s+o/2},{x:i-p.width/2,y:s+o/2},{x:i-p.width/2,y:s-o/2+w},{x:i-b/2,y:s-o/2+w}],tN.polygon(e,h,t)},f}async function ee(t,e,a){var n,i,s,o;let{config:{themeVariables:h,flowchart:c}}=a,{labelStyles:d}=tm(e);e.labelStyle=d;let u=Math.max(null!=(n=e.assetHeight)?n:48,null!=(i=e.assetWidth)?i:48),g=null==c?void 0:c.wrappingWidth;e.width=Math.max(u,null!=g?g:0);let{shapeSvg:f,bbox:p,halfPadding:y,label:m}=await te(t,e,"icon-shape default"),x="t"===e.pos,w=u+2*y,b=u+2*y,{nodeBorder:v,mainBkg:k}=h,{stylesMap:M}=tf(e),_=8*!!e.label,S=tt.svg(f),D=tx(e,{});"handDrawn"!==e.look&&(D.roughness=0,D.fillStyle="solid");let C=M.get("fill");D.stroke=null!=C?C:k;let A=S.path(tu(-b/2,-w/2,b,w,.1),D),P=Math.max(b,p.width),L=w+p.height+_,B=S.rectangle(-P/2,-L/2,P,L,{...D,fill:"transparent",stroke:"none"}),N=f.insert(()=>A,":first-child"),T=f.insert(()=>B);if(e.icon){let t=f.append("g");t.html("<g>".concat(await (0,l.getIconSVG)(e.icon,{height:u,width:u,fallbackPrefix:""}),"</g>"));let a=t.node().getBBox(),n=a.width,i=a.height,r=a.x,o=a.y;t.attr("transform","translate(".concat(-n/2-r,",").concat(x?p.height/2+_/2-i/2-o:-p.height/2-_/2-i/2-o,")")),t.attr("style","color: ".concat(null!=(s=M.get("stroke"))?s:v,";"))}return m.attr("transform","translate(".concat(-p.width/2-(p.x-(null!=(o=p.left)?o:0)),",").concat(x?-L/2:L/2-p.height,")")),N.attr("transform","translate(".concat(0,",").concat(x?p.height/2+_/2:-p.height/2-_/2,")")),tl(e,T),e.intersect=function(t){var a,l,n;if(r.log.info("iconSquare intersect",e,t),!e.label)return tN.rect(e,t);let i=null!=(a=e.x)?a:0,s=null!=(l=e.y)?l:0,o=null!=(n=e.height)?n:0,h=[];return h=x?[{x:i-p.width/2,y:s-o/2},{x:i+p.width/2,y:s-o/2},{x:i+p.width/2,y:s-o/2+p.height+_},{x:i+b/2,y:s-o/2+p.height+_},{x:i+b/2,y:s+o/2},{x:i-b/2,y:s+o/2},{x:i-b/2,y:s-o/2+p.height+_},{x:i-p.width/2,y:s-o/2+p.height+_}]:[{x:i-b/2,y:s-o/2},{x:i+b/2,y:s-o/2},{x:i+b/2,y:s-o/2+w},{x:i+p.width/2,y:s-o/2+w},{x:i+p.width/2/2,y:s+o/2},{x:i-p.width/2,y:s+o/2},{x:i-p.width/2,y:s-o/2+w},{x:i-b/2,y:s-o/2+w}],tN.polygon(e,h,t)},f}async function ea(t,e,a){var l,n,i,s;let{config:{flowchart:o}}=a,h=new Image;h.src=null!=(l=null==e?void 0:e.img)?l:"",await h.decode();let c=Number(h.naturalWidth.toString().replace("px","")),d=Number(h.naturalHeight.toString().replace("px",""));e.imageAspectRatio=c/d;let{labelStyles:u}=tm(e);e.labelStyle=u;let g=null==o?void 0:o.wrappingWidth;e.defaultWidth=null==o?void 0:o.wrappingWidth;let f=Math.max(e.label&&null!=g?g:0,null!=(n=null==e?void 0:e.assetWidth)?n:c),p="on"===e.constraint&&(null==e?void 0:e.assetHeight)?e.assetHeight*e.imageAspectRatio:f,y="on"===e.constraint?p/e.imageAspectRatio:null!=(i=null==e?void 0:e.assetHeight)?i:d;e.width=Math.max(p,null!=g?g:0);let{shapeSvg:m,bbox:x,label:w}=await te(t,e,"image-shape default"),b="t"===e.pos,v=-p/2,k=8*!!e.label,M=tt.svg(m),_=tx(e,{});"handDrawn"!==e.look&&(_.roughness=0,_.fillStyle="solid");let S=M.rectangle(v,-y/2,p,y,_),D=Math.max(p,x.width),C=y+x.height+k,A=M.rectangle(-D/2,-C/2,D,C,{..._,fill:"none",stroke:"none"}),P=m.insert(()=>S,":first-child"),L=m.insert(()=>A);if(e.img){let t=m.append("image");t.attr("href",e.img),t.attr("width",p),t.attr("height",y),t.attr("preserveAspectRatio","none"),t.attr("transform","translate(".concat(-p/2,",").concat(b?C/2-y:-C/2,")"))}return w.attr("transform","translate(".concat(-x.width/2-(x.x-(null!=(s=x.left)?s:0)),",").concat(b?-y/2-x.height/2-k/2:y/2-x.height/2+k/2,")")),P.attr("transform","translate(".concat(0,",").concat(b?x.height/2+k/2:-x.height/2-k/2,")")),tl(e,L),e.intersect=function(t){var a,l,n;if(r.log.info("iconSquare intersect",e,t),!e.label)return tN.rect(e,t);let i=null!=(a=e.x)?a:0,s=null!=(l=e.y)?l:0,o=null!=(n=e.height)?n:0,h=[];return h=b?[{x:i-x.width/2,y:s-o/2},{x:i+x.width/2,y:s-o/2},{x:i+x.width/2,y:s-o/2+x.height+k},{x:i+p/2,y:s-o/2+x.height+k},{x:i+p/2,y:s+o/2},{x:i-p/2,y:s+o/2},{x:i-p/2,y:s-o/2+x.height+k},{x:i-x.width/2,y:s-o/2+x.height+k}]:[{x:i-p/2,y:s-o/2},{x:i+p/2,y:s-o/2},{x:i+p/2,y:s-o/2+y},{x:i+x.width/2,y:s-o/2+y},{x:i+x.width/2/2,y:s+o/2},{x:i-x.width/2,y:s+o/2},{x:i-x.width/2,y:s-o/2+y},{x:i-p/2,y:s-o/2+y}],tN.polygon(e,h,t)},m}async function el(t,e){var a,l,n,i;let r,{labelStyles:s,nodeStyles:o}=tm(e);e.labelStyle=s;let{shapeSvg:h,bbox:c}=await te(t,e,tn(e)),d=Math.max(c.width+(null!=(a=e.padding)?a:0)*2,null!=(l=null==e?void 0:e.width)?l:0),u=Math.max(c.height+(null!=(n=e.padding)?n:0)*2,null!=(i=null==e?void 0:e.height)?i:0),g=[{x:0,y:0},{x:d,y:0},{x:d+3*u/6,y:-u},{x:-3*u/6,y:-u}],{cssStyles:f}=e;if("handDrawn"===e.look){let t=tt.svg(h),a=tx(e,{}),l=ti(g),n=t.path(l,a);r=h.insert(()=>n,":first-child").attr("transform","translate(".concat(-d/2,", ").concat(u/2,")")),f&&r.attr("style",f)}else r=tO(h,d,u,g);return o&&r.attr("style",o),e.width=d,e.height=u,tl(e,r),e.intersect=function(t){return tN.polygon(e,g,t)},h}async function en(t,e,a){let l,{labelStyles:n,nodeStyles:r}=tm(e);e.labelStyle=n;let{shapeSvg:s,bbox:o}=await te(t,e,tn(e)),h=Math.max(o.width+2*a.labelPaddingX,(null==e?void 0:e.width)||0),c=Math.max(o.height+2*a.labelPaddingY,(null==e?void 0:e.height)||0),d=-h/2,u=-c/2,{rx:g,ry:f}=e,{cssStyles:p}=e;if((null==a?void 0:a.rx)&&a.ry&&(g=a.rx,f=a.ry),"handDrawn"===e.look){let t=tt.svg(s),a=tx(e,{}),n=g||f?t.path(tu(d,u,h,c,g||0),a):t.rectangle(d,u,h,c,a);(l=s.insert(()=>n,":first-child")).attr("class","basic label-container").attr("style",(0,i.handleUndefinedAttr)(p))}else(l=s.insert("rect",":first-child")).attr("class","basic label-container").attr("style",r).attr("rx",(0,i.handleUndefinedAttr)(g)).attr("ry",(0,i.handleUndefinedAttr)(f)).attr("x",d).attr("y",u).attr("width",h).attr("height",c);return tl(e,l),e.intersect=function(t){return tN.rect(e,t)},s}async function ei(t,e){var a,l;let{shapeSvg:n,bbox:i,label:r}=await te(t,e,"label"),s=n.insert("rect",":first-child");return s.attr("width",.1).attr("height",.1),n.attr("class","label edgeLabel"),r.attr("transform","translate(".concat(-(i.width/2)-(i.x-(null!=(a=i.left)?a:0)),", ").concat(-(i.height/2)-(i.y-(null!=(l=i.top)?l:0)),")")),tl(e,s),e.intersect=function(t){return tN.rect(e,t)},n}async function er(t,e){var a,l,n,i;let r,{labelStyles:s,nodeStyles:o}=tm(e);e.labelStyle=s;let{shapeSvg:h,bbox:c}=await te(t,e,tn(e)),d=Math.max(c.width+(null!=(a=e.padding)?a:0),null!=(l=null==e?void 0:e.width)?l:0),u=Math.max(c.height+(null!=(n=e.padding)?n:0),null!=(i=null==e?void 0:e.height)?i:0),g=[{x:0,y:0},{x:d+3*u/6,y:0},{x:d,y:-u},{x:-(3*u)/6,y:-u}],{cssStyles:f}=e;if("handDrawn"===e.look){let t=tt.svg(h),a=tx(e,{}),l=ti(g),n=t.path(l,a);r=h.insert(()=>n,":first-child").attr("transform","translate(".concat(-d/2,", ").concat(u/2,")")),f&&r.attr("style",f)}else r=tO(h,d,u,g);return o&&r.attr("style",o),e.width=d,e.height=u,tl(e,r),e.intersect=function(t){return tN.polygon(e,g,t)},h}async function es(t,e){var a,l,n,i;let r,{labelStyles:s,nodeStyles:o}=tm(e);e.labelStyle=s;let{shapeSvg:h,bbox:c}=await te(t,e,tn(e)),d=Math.max(c.width+(null!=(a=e.padding)?a:0),null!=(l=null==e?void 0:e.width)?l:0),u=Math.max(c.height+(null!=(n=e.padding)?n:0),null!=(i=null==e?void 0:e.height)?i:0),g=[{x:-3*u/6,y:0},{x:d,y:0},{x:d+3*u/6,y:-u},{x:0,y:-u}],{cssStyles:f}=e;if("handDrawn"===e.look){let t=tt.svg(h),a=tx(e,{}),l=ti(g),n=t.path(l,a);r=h.insert(()=>n,":first-child").attr("transform","translate(".concat(-d/2,", ").concat(u/2,")")),f&&r.attr("style",f)}else r=tO(h,d,u,g);return o&&r.attr("style",o),e.width=d,e.height=u,tl(e,r),e.intersect=function(t){return tN.polygon(e,g,t)},h}function eo(t,e){var a,l,n;let{labelStyles:i,nodeStyles:s}=tm(e);e.label="",e.labelStyle=i;let o=t.insert("g").attr("class",tn(e)).attr("id",null!=(a=e.domId)?a:e.id),{cssStyles:h}=e,c=Math.max(35,null!=(l=null==e?void 0:e.width)?l:0),d=Math.max(35,null!=(n=null==e?void 0:e.height)?n:0),u=[{x:c,y:0},{x:0,y:d+3.5},{x:c-14,y:d+3.5},{x:0,y:2*d},{x:c,y:d-3.5},{x:14,y:d-3.5}],g=tt.svg(o),f=tx(e,{});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let p=ti(u),y=g.path(p,f),m=o.insert(()=>y,":first-child");return h&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",h),s&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",s),m.attr("transform","translate(-".concat(c/2,",").concat(-d,")")),tl(e,m),e.intersect=function(t){return r.log.info("lightningBolt intersect",e,t),tN.polygon(e,u,t)},o}(0,r.__name)(t8,"hexagon"),(0,r.__name)(t9,"hourglass"),(0,r.__name)(t6,"icon"),(0,r.__name)(t7,"iconCircle"),(0,r.__name)(et,"iconRounded"),(0,r.__name)(ee,"iconSquare"),(0,r.__name)(ea,"imageSquare"),(0,r.__name)(el,"inv_trapezoid"),(0,r.__name)(en,"drawRect"),(0,r.__name)(ei,"labelRect"),(0,r.__name)(er,"lean_left"),(0,r.__name)(es,"lean_right"),(0,r.__name)(eo,"lightningBolt");var eh=(0,r.__name)((t,e,a,l,n,i,r)=>["M".concat(t,",").concat(e+i),"a".concat(n,",").concat(i," 0,0,0 ").concat(a,",0"),"a".concat(n,",").concat(i," 0,0,0 ").concat(-a,",0"),"l0,".concat(l),"a".concat(n,",").concat(i," 0,0,0 ").concat(a,",0"),"l0,".concat(-l),"M".concat(t,",").concat(e+i+r),"a".concat(n,",").concat(i," 0,0,0 ").concat(a,",0")].join(" "),"createCylinderPathD"),ec=(0,r.__name)((t,e,a,l,n,i,r)=>["M".concat(t,",").concat(e+i),"M".concat(t+a,",").concat(e+i),"a".concat(n,",").concat(i," 0,0,0 ").concat(-a,",0"),"l0,".concat(l),"a".concat(n,",").concat(i," 0,0,0 ").concat(a,",0"),"l0,".concat(-l),"M".concat(t,",").concat(e+i+r),"a".concat(n,",").concat(i," 0,0,0 ").concat(a,",0")].join(" "),"createOuterCylinderPathD"),ed=(0,r.__name)((t,e,a,l,n,i)=>["M".concat(t-a/2,",").concat(-l/2),"a".concat(n,",").concat(i," 0,0,0 ").concat(a,",0")].join(" "),"createInnerCylinderPathD");async function eu(t,e){var a,l,n,r,s,o;let h,{labelStyles:c,nodeStyles:d}=tm(e);e.labelStyle=c;let{shapeSvg:u,bbox:g,label:f}=await te(t,e,tn(e)),p=Math.max(g.width+(null!=(a=e.padding)?a:0),null!=(l=e.width)?l:0),y=p/2,m=y/(2.5+p/50),x=Math.max(g.height+m+(null!=(n=e.padding)?n:0),null!=(r=e.height)?r:0),w=.1*x,{cssStyles:b}=e;if("handDrawn"===e.look){let t=tt.svg(u),a=ec(0,0,p,x,y,m,w),l=ed(0,m,p,x,y,m),n=tx(e,{}),i=t.path(a,n),r=t.path(l,n);u.insert(()=>r,":first-child").attr("class","line"),(h=u.insert(()=>i,":first-child")).attr("class","basic label-container"),b&&h.attr("style",b)}else{let t=eh(0,0,p,x,y,m,w);h=u.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,i.handleUndefinedAttr)(b)).attr("style",d)}return h.attr("label-offset-y",m),h.attr("transform","translate(".concat(-p/2,", ").concat(-(x/2+m),")")),tl(e,h),f.attr("transform","translate(".concat(-(g.width/2)-(g.x-(null!=(s=g.left)?s:0)),", ").concat(-(g.height/2)+m-(g.y-(null!=(o=g.top)?o:0)),")")),e.intersect=function(t){var a,l,n,i,r,s;let o=tN.rect(e,t),h=o.x-(null!=(a=e.x)?a:0);if(0!=y&&(Math.abs(h)<(null!=(l=e.width)?l:0)/2||Math.abs(h)==(null!=(n=e.width)?n:0)/2&&Math.abs(o.y-(null!=(i=e.y)?i:0))>(null!=(r=e.height)?r:0)/2-m)){let a=m*m*(1-h*h/(y*y));a>0&&(a=Math.sqrt(a)),a=m-a,t.y-(null!=(s=e.y)?s:0)>0&&(a=-a),o.y+=a}return o},u}async function eg(t,e){var a,l,n,i,r,s,o,h;let{labelStyles:c,nodeStyles:d}=tm(e);e.labelStyle=c;let{shapeSvg:u,bbox:g,label:f}=await te(t,e,tn(e)),p=Math.max(g.width+(null!=(a=e.padding)?a:0)*2,null!=(l=null==e?void 0:e.width)?l:0),y=Math.max(g.height+(null!=(n=e.padding)?n:0)*2,null!=(i=null==e?void 0:e.height)?i:0),m=y/4,x=y+m,{cssStyles:w}=e,b=tt.svg(u),v=tx(e,{});"handDrawn"!==e.look&&(v.roughness=0,v.fillStyle="solid");let k=[{x:-p/2-p/2*.1,y:-x/2},{x:-p/2-p/2*.1,y:x/2},...tr(-p/2-p/2*.1,x/2,p/2+p/2*.1,x/2,m,.8),{x:p/2+p/2*.1,y:-x/2},{x:-p/2-p/2*.1,y:-x/2},{x:-p/2,y:-x/2},{x:-p/2,y:x/2*1.1},{x:-p/2,y:-x/2}],M=b.polygon(k.map(t=>[t.x,t.y]),v),_=u.insert(()=>M,":first-child");return _.attr("class","basic label-container"),w&&"handDrawn"!==e.look&&_.selectAll("path").attr("style",w),d&&"handDrawn"!==e.look&&_.selectAll("path").attr("style",d),_.attr("transform","translate(0,".concat(-m/2,")")),f.attr("transform","translate(".concat(-p/2+(null!=(r=e.padding)?r:0)+p/2*.1/2-(g.x-(null!=(s=g.left)?s:0)),",").concat(-y/2+(null!=(o=e.padding)?o:0)-m/2-(g.y-(null!=(h=g.top)?h:0)),")")),tl(e,_),e.intersect=function(t){return tN.polygon(e,k,t)},u}async function ef(t,e){var a,l,n,i,r,s;let{labelStyles:o,nodeStyles:h}=tm(e);e.labelStyle=o;let{shapeSvg:c,bbox:d,label:u}=await te(t,e,tn(e)),g=Math.max(d.width+(null!=(a=e.padding)?a:0)*2,null!=(l=null==e?void 0:e.width)?l:0),f=Math.max(d.height+(null!=(n=e.padding)?n:0)*2,null!=(i=null==e?void 0:e.height)?i:0),p=-g/2,y=-f/2,{cssStyles:m}=e,x=tt.svg(c),w=tx(e,{}),b=[{x:p-5,y:y+5},{x:p-5,y:y+f+5},{x:p+g-5,y:y+f+5},{x:p+g-5,y:y+f},{x:p+g,y:y+f},{x:p+g,y:y+f-5},{x:p+g+5,y:y+f-5},{x:p+g+5,y:y-5},{x:p+5,y:y-5},{x:p+5,y},{x:p,y},{x:p,y:y+5}];"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid");let v=ti(b),k=x.path(v,w),M=ti([{x:p,y:y+5},{x:p+g-5,y:y+5},{x:p+g-5,y:y+f},{x:p+g,y:y+f},{x:p+g,y},{x:p,y}]),_=x.path(M,{...w,fill:"none"}),S=c.insert(()=>_,":first-child");return S.insert(()=>k,":first-child"),S.attr("class","basic label-container"),m&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",m),h&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",h),u.attr("transform","translate(".concat(-(d.width/2)-5-(d.x-(null!=(r=d.left)?r:0)),", ").concat(-(d.height/2)+5-(d.y-(null!=(s=d.top)?s:0)),")")),tl(e,S),e.intersect=function(t){return tN.polygon(e,b,t)},c}async function ep(t,e){var a,l,n,i,r,s;let{labelStyles:o,nodeStyles:h}=tm(e);e.labelStyle=o;let{shapeSvg:c,bbox:d,label:u}=await te(t,e,tn(e)),g=Math.max(d.width+(null!=(a=e.padding)?a:0)*2,null!=(l=null==e?void 0:e.width)?l:0),f=Math.max(d.height+(null!=(n=e.padding)?n:0)*2,null!=(i=null==e?void 0:e.height)?i:0),p=f/4,y=f+p,m=-g/2,x=-y/2,{cssStyles:w}=e,b=tr(m-5,x+y+5,m+g-5,x+y+5,p,.8),v=null==b?void 0:b[b.length-1],k=[{x:m-5,y:x+5},{x:m-5,y:x+y+5},...b,{x:m+g-5,y:v.y-5},{x:m+g,y:v.y-5},{x:m+g,y:v.y-10},{x:m+g+5,y:v.y-10},{x:m+g+5,y:x-5},{x:m+5,y:x-5},{x:m+5,y:x},{x:m,y:x},{x:m,y:x+5}],M=[{x:m,y:x+5},{x:m+g-5,y:x+5},{x:m+g-5,y:v.y-5},{x:m+g,y:v.y-5},{x:m+g,y:x},{x:m,y:x}],_=tt.svg(c),S=tx(e,{});"handDrawn"!==e.look&&(S.roughness=0,S.fillStyle="solid");let D=ti(k),C=_.path(D,S),A=ti(M),P=_.path(A,S),L=c.insert(()=>C,":first-child");return L.insert(()=>P),L.attr("class","basic label-container"),w&&"handDrawn"!==e.look&&L.selectAll("path").attr("style",w),h&&"handDrawn"!==e.look&&L.selectAll("path").attr("style",h),L.attr("transform","translate(0,".concat(-p/2,")")),u.attr("transform","translate(".concat(-(d.width/2)-5-(d.x-(null!=(r=d.left)?r:0)),", ").concat(-(d.height/2)+5-p/2-(d.y-(null!=(s=d.top)?s:0)),")")),tl(e,L),e.intersect=function(t){return tN.polygon(e,k,t)},c}async function ey(t,e,a){var l,n,i,s,o;let{config:{themeVariables:h}}=a,{labelStyles:c,nodeStyles:d}=tm(e);e.labelStyle=c,e.useHtmlLabels||(null==(l=(0,r.getConfig)().flowchart)?void 0:l.htmlLabels)!==!1||(e.centerLabel=!0);let{shapeSvg:u,bbox:g}=await te(t,e,tn(e)),f=Math.max(g.width+(null!=(n=e.padding)?n:0)*2,null!=(i=null==e?void 0:e.width)?i:0),p=Math.max(g.height+(null!=(s=e.padding)?s:0)*2,null!=(o=null==e?void 0:e.height)?o:0),{cssStyles:y}=e,m=tt.svg(u),x=tx(e,{fill:h.noteBkgColor,stroke:h.noteBorderColor});"handDrawn"!==e.look&&(x.roughness=0,x.fillStyle="solid");let w=m.rectangle(-f/2,-p/2,f,p,x),b=u.insert(()=>w,":first-child");return b.attr("class","basic label-container"),y&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",y),d&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",d),tl(e,b),e.intersect=function(t){return tN.rect(e,t)},u}(0,r.__name)(eu,"linedCylinder"),(0,r.__name)(eg,"linedWaveEdgedRect"),(0,r.__name)(ef,"multiRect"),(0,r.__name)(ep,"multiWaveEdgedRectangle"),(0,r.__name)(ey,"note");var em=(0,r.__name)((t,e,a)=>["M".concat(t+a/2,",").concat(e),"L".concat(t+a,",").concat(e-a/2),"L".concat(t+a/2,",").concat(e-a),"L".concat(t,",").concat(e-a/2),"Z"].join(" "),"createDecisionBoxPathD");async function ex(t,e){let a,{labelStyles:l,nodeStyles:n}=tm(e);e.labelStyle=l;let{shapeSvg:i,bbox:s}=await te(t,e,tn(e)),o=s.width+e.padding+(s.height+e.padding),h=[{x:o/2,y:0},{x:o,y:-o/2},{x:o/2,y:-o},{x:0,y:-o/2}],{cssStyles:c}=e;if("handDrawn"===e.look){let t=tt.svg(i),l=tx(e,{}),n=em(0,0,o),r=t.path(n,l);a=i.insert(()=>r,":first-child").attr("transform","translate(".concat(-o/2,", ").concat(o/2,")")),c&&a.attr("style",c)}else a=tO(i,o,o,h);return n&&a.attr("style",n),tl(e,a),e.intersect=function(t){return r.log.debug("APA12 Intersect called SPLIT\npoint:",t,"\nnode:\n",e,"\nres:",tN.polygon(e,h,t)),tN.polygon(e,h,t)},i}async function ew(t,e){var a,l,n,i,r,s;let{labelStyles:o,nodeStyles:h}=tm(e);e.labelStyle=o;let{shapeSvg:c,bbox:d,label:u}=await te(t,e,tn(e)),g=Math.max(d.width+(null!=(a=e.padding)?a:0),null!=(l=null==e?void 0:e.width)?l:0),f=Math.max(d.height+(null!=(n=e.padding)?n:0),null!=(i=null==e?void 0:e.height)?i:0),p=-g/2,y=-f/2,m=y/2,x=[{x:p+m,y},{x:p,y:0},{x:p+m,y:-y},{x:-p,y:-y},{x:-p,y}],{cssStyles:w}=e,b=tt.svg(c),v=tx(e,{});"handDrawn"!==e.look&&(v.roughness=0,v.fillStyle="solid");let k=ti(x),M=b.path(k,v),_=c.insert(()=>M,":first-child");return _.attr("class","basic label-container"),w&&"handDrawn"!==e.look&&_.selectAll("path").attr("style",w),h&&"handDrawn"!==e.look&&_.selectAll("path").attr("style",h),_.attr("transform","translate(".concat(-m/2,",0)")),u.attr("transform","translate(".concat(-m/2-d.width/2-(d.x-(null!=(r=d.left)?r:0)),", ").concat(-(d.height/2)-(d.y-(null!=(s=d.top)?s:0)),")")),tl(e,_),e.intersect=function(t){return tN.polygon(e,x,t)},c}async function eb(t,e){var a,l;let n,i,o,{labelStyles:h,nodeStyles:c}=tm(e);e.labelStyle=h,n=e.cssClasses?"node "+e.cssClasses:"node default";let d=t.insert("g").attr("class",n).attr("id",e.domId||e.id),u=d.insert("g"),g=d.insert("g").attr("class","label").attr("style",c),f=e.description,p=e.label,y=g.node().appendChild(await td(p,e.labelStyle,!0,!0)),m={width:0,height:0};if((0,r.evaluate)(null==(l=(0,r.getConfig2)())||null==(a=l.flowchart)?void 0:a.htmlLabels)){let t=y.children[0],e=(0,s.select)(y);m=t.getBoundingClientRect(),e.attr("width",m.width),e.attr("height",m.height)}r.log.info("Text 2",f);let x=f||[],w=y.getBBox(),b=g.node().appendChild(await td(x.join?x.join("<br/>"):x,e.labelStyle,!0,!0)),v=b.children[0],k=(0,s.select)(b);m=v.getBoundingClientRect(),k.attr("width",m.width),k.attr("height",m.height);let M=(e.padding||0)/2;(0,s.select)(b).attr("transform","translate( "+(m.width>w.width?0:(w.width-m.width)/2)+", "+(w.height+M+5)+")"),(0,s.select)(y).attr("transform","translate( "+(m.width<w.width?0:-(w.width-m.width)/2)+", 0)"),m=g.node().getBBox(),g.attr("transform","translate("+-m.width/2+", "+(-m.height/2-M+3)+")");let _=m.width+(e.padding||0),S=m.height+(e.padding||0),D=-m.width/2-M,C=-m.height/2-M;if("handDrawn"===e.look){let t=tt.svg(d),a=tx(e,{}),l=t.path(tu(D,C,_,S,e.rx||0),a),n=t.line(-m.width/2-M,-m.height/2-M+w.height+M,m.width/2+M,-m.height/2-M+w.height+M,a);o=d.insert(()=>(r.log.debug("Rough node insert CXC",l),n),":first-child"),i=d.insert(()=>(r.log.debug("Rough node insert CXC",l),l),":first-child")}else i=u.insert("rect",":first-child"),o=u.insert("line"),i.attr("class","outer title-state").attr("style",c).attr("x",-m.width/2-M).attr("y",-m.height/2-M).attr("width",m.width+(e.padding||0)).attr("height",m.height+(e.padding||0)),o.attr("class","divider").attr("x1",-m.width/2-M).attr("x2",m.width/2+M).attr("y1",-m.height/2-M+w.height+M).attr("y2",-m.height/2-M+w.height+M);return tl(e,i),e.intersect=function(t){return tN.rect(e,t)},d}async function ev(t,e){let a={rx:5,ry:5,classes:"",labelPaddingX:+((null==e?void 0:e.padding)||0),labelPaddingY:+((null==e?void 0:e.padding)||0)};return en(t,e,a)}async function ek(t,e){var a,l,n,r,s,o,h,c,d;let{labelStyles:u,nodeStyles:g}=tm(e);e.labelStyle=u;let{shapeSvg:f,bbox:p,label:y}=await te(t,e,tn(e)),m=null!=(a=null==e?void 0:e.padding)?a:0,x=Math.max(p.width+(null!=(l=e.padding)?l:0)*2,null!=(n=null==e?void 0:e.width)?n:0),w=Math.max(p.height+(null!=(r=e.padding)?r:0)*2,null!=(s=null==e?void 0:e.height)?s:0),b=-p.width/2-m,v=-p.height/2-m,{cssStyles:k}=e,M=tt.svg(f),_=tx(e,{});"handDrawn"!==e.look&&(_.roughness=0,_.fillStyle="solid");let S=M.polygon([{x:b,y:v},{x:b+x+8,y:v},{x:b+x+8,y:v+w},{x:b-8,y:v+w},{x:b-8,y:v},{x:b,y:v},{x:b,y:v+w}].map(t=>[t.x,t.y]),_),D=f.insert(()=>S,":first-child");return D.attr("class","basic label-container").attr("style",(0,i.handleUndefinedAttr)(k)),g&&"handDrawn"!==e.look&&D.selectAll("path").attr("style",g),k&&"handDrawn"!==e.look&&D.selectAll("path").attr("style",g),y.attr("transform","translate(".concat(-x/2+4+(null!=(o=e.padding)?o:0)-(p.x-(null!=(h=p.left)?h:0)),",").concat(-w/2+(null!=(c=e.padding)?c:0)-(p.y-(null!=(d=p.top)?d:0)),")")),tl(e,D),e.intersect=function(t){return tN.rect(e,t)},f}async function eM(t,e){var a,l,n,i,r,s,o,h;let{labelStyles:c,nodeStyles:d}=tm(e);e.labelStyle=c;let{shapeSvg:u,bbox:g,label:f}=await te(t,e,tn(e)),p=Math.max(g.width+(null!=(a=e.padding)?a:0)*2,null!=(l=null==e?void 0:e.width)?l:0),y=Math.max(g.height+(null!=(n=e.padding)?n:0)*2,null!=(i=null==e?void 0:e.height)?i:0),m=-p/2,x=-y/2,{cssStyles:w}=e,b=tt.svg(u),v=tx(e,{});"handDrawn"!==e.look&&(v.roughness=0,v.fillStyle="solid");let k=[{x:m,y:x},{x:m,y:x+y},{x:m+p,y:x+y},{x:m+p,y:x-y/2}],M=ti(k),_=b.path(M,v),S=u.insert(()=>_,":first-child");return S.attr("class","basic label-container"),w&&"handDrawn"!==e.look&&S.selectChildren("path").attr("style",w),d&&"handDrawn"!==e.look&&S.selectChildren("path").attr("style",d),S.attr("transform","translate(0, ".concat(y/4,")")),f.attr("transform","translate(".concat(-p/2+(null!=(r=e.padding)?r:0)-(g.x-(null!=(s=g.left)?s:0)),", ").concat(-y/4+(null!=(o=e.padding)?o:0)-(g.y-(null!=(h=g.top)?h:0)),")")),tl(e,S),e.intersect=function(t){return tN.polygon(e,k,t)},u}async function e_(t,e){let a={rx:0,ry:0,classes:"",labelPaddingX:2*((null==e?void 0:e.padding)||0),labelPaddingY:+((null==e?void 0:e.padding)||0)};return en(t,e,a)}async function eS(t,e){let a,{labelStyles:l,nodeStyles:n}=tm(e);e.labelStyle=l;let{shapeSvg:r,bbox:s}=await te(t,e,tn(e)),o=s.height+e.padding,h=s.width+o/4+e.padding,{cssStyles:c}=e;if("handDrawn"===e.look){let t=tt.svg(r),l=tx(e,{}),n=tu(-h/2,-o/2,h,o,o/2),s=t.path(n,l);(a=r.insert(()=>s,":first-child")).attr("class","basic label-container").attr("style",(0,i.handleUndefinedAttr)(c))}else(a=r.insert("rect",":first-child")).attr("class","basic label-container").attr("style",n).attr("rx",o/2).attr("ry",o/2).attr("x",-h/2).attr("y",-o/2).attr("width",h).attr("height",o);return tl(e,a),e.intersect=function(t){return tN.rect(e,t)},r}async function eD(t,e){return en(t,e,{rx:5,ry:5,classes:"flowchart-node"})}function eC(t,e,a){let{config:{themeVariables:l}}=a,{labelStyles:n,nodeStyles:i}=tm(e);e.labelStyle=n;let{cssStyles:r}=e,{lineColor:s,stateBorder:o,nodeBorder:h}=l,c=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),d=tt.svg(c),u=tx(e,{});"handDrawn"!==e.look&&(u.roughness=0,u.fillStyle="solid");let g=d.circle(0,0,14,{...u,stroke:s,strokeWidth:2}),f=null!=o?o:h,p=d.circle(0,0,5,{...u,fill:f,stroke:f,strokeWidth:2,fillStyle:"solid"}),y=c.insert(()=>g,":first-child");return y.insert(()=>p),r&&y.selectAll("path").attr("style",r),i&&y.selectAll("path").attr("style",i),tl(e,y),e.intersect=function(t){return tN.circle(e,7,t)},c}function eA(t,e,a){let l,{config:{themeVariables:n}}=a,{lineColor:i}=n,r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);if("handDrawn"===e.look){let t=tt.svg(r).circle(0,0,14,tg(i));(l=r.insert(()=>t)).attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else(l=r.insert("circle",":first-child")).attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return tl(e,l),e.intersect=function(t){return tN.circle(e,7,t)},r}async function eP(t,e){let{labelStyles:a,nodeStyles:l}=tm(e);e.labelStyle=a;let{shapeSvg:n,bbox:r}=await te(t,e,tn(e)),s=((null==e?void 0:e.padding)||0)/2,o=r.width+e.padding,h=r.height+e.padding,c=-r.width/2-s,d=-r.height/2-s,u=[{x:0,y:0},{x:o,y:0},{x:o,y:-h},{x:0,y:-h},{x:0,y:0},{x:-8,y:0},{x:o+8,y:0},{x:o+8,y:-h},{x:-8,y:-h},{x:-8,y:0}];if("handDrawn"===e.look){let t=tt.svg(n),a=tx(e,{}),l=t.rectangle(c-8,d,o+16,h,a),r=t.line(c,d,c,d+h,a),s=t.line(c+o,d,c+o,d+h,a);n.insert(()=>r,":first-child"),n.insert(()=>s,":first-child");let u=n.insert(()=>l,":first-child"),{cssStyles:g}=e;u.attr("class","basic label-container").attr("style",(0,i.handleUndefinedAttr)(g)),tl(e,u)}else{let t=tO(n,o,h,u);l&&t.attr("style",l),tl(e,t)}return e.intersect=function(t){return tN.polygon(e,u,t)},n}async function eL(t,e){var a,l,n,i;let{labelStyles:r,nodeStyles:s}=tm(e);e.labelStyle=r;let{shapeSvg:o,bbox:h}=await te(t,e,tn(e)),c=Math.max(h.width+(null!=(a=e.padding)?a:0)*2,null!=(l=null==e?void 0:e.width)?l:0),d=Math.max(h.height+(null!=(n=e.padding)?n:0)*2,null!=(i=null==e?void 0:e.height)?i:0),u=-c/2,g=-d/2,f=.2*d,{cssStyles:p}=e,y=tt.svg(o),m=tx(e,{}),x=[{x:u-f/2,y:g},{x:u+c+f/2,y:g},{x:u+c+f/2,y:g+d},{x:u-f/2,y:g+d}];"handDrawn"!==e.look&&(m.roughness=0,m.fillStyle="solid");let w=ti(x),b=y.path(w,m),v=ti([{x:u+c-f/2,y:g+d},{x:u+c+f/2,y:g+d},{x:u+c+f/2,y:g+d-.2*d}]),k=y.path(v,{...m,fillStyle:"solid"}),M=o.insert(()=>k,":first-child");return M.insert(()=>b,":first-child"),M.attr("class","basic label-container"),p&&"handDrawn"!==e.look&&M.selectAll("path").attr("style",p),s&&"handDrawn"!==e.look&&M.selectAll("path").attr("style",s),tl(e,M),e.intersect=function(t){return tN.polygon(e,x,t)},o}async function eB(t,e){var a,l,n,i,r,s,o,h;let{labelStyles:c,nodeStyles:d}=tm(e);e.labelStyle=c;let{shapeSvg:u,bbox:g,label:f}=await te(t,e,tn(e)),p=Math.max(g.width+(null!=(a=e.padding)?a:0)*2,null!=(l=null==e?void 0:e.width)?l:0),y=Math.max(g.height+(null!=(n=e.padding)?n:0)*2,null!=(i=null==e?void 0:e.height)?i:0),m=y/4,x=.2*p,w=.2*y,b=y+m,{cssStyles:v}=e,k=tt.svg(u),M=tx(e,{});"handDrawn"!==e.look&&(M.roughness=0,M.fillStyle="solid");let _=[{x:-p/2-p/2*.1,y:b/2},...tr(-p/2-p/2*.1,b/2,p/2+p/2*.1,b/2,m,.8),{x:p/2+p/2*.1,y:-b/2},{x:-p/2-p/2*.1,y:-b/2}],S=-p/2+p/2*.1,D=-b/2-.4*w,C=[{x:S+p-x,y:(D+y)*1.4},{x:S+p,y:D+y-w},{x:S+p,y:(D+y)*.9},...tr(S+p,(D+y)*1.3,S+p-x,(D+y)*1.5,-(.03*y),.5)],A=ti(_),P=k.path(A,M),L=ti(C),B=k.path(L,{...M,fillStyle:"solid"}),N=u.insert(()=>B,":first-child");return N.insert(()=>P,":first-child"),N.attr("class","basic label-container"),v&&"handDrawn"!==e.look&&N.selectAll("path").attr("style",v),d&&"handDrawn"!==e.look&&N.selectAll("path").attr("style",d),N.attr("transform","translate(0,".concat(-m/2,")")),f.attr("transform","translate(".concat(-p/2+(null!=(r=e.padding)?r:0)-(g.x-(null!=(s=g.left)?s:0)),",").concat(-y/2+(null!=(o=e.padding)?o:0)-m/2-(g.y-(null!=(h=g.top)?h:0)),")")),tl(e,N),e.intersect=function(t){return tN.polygon(e,_,t)},u}async function eN(t,e){let{labelStyles:a,nodeStyles:l}=tm(e);e.labelStyle=a;let{shapeSvg:n,bbox:i}=await te(t,e,tn(e)),r=Math.max(i.width+e.padding,(null==e?void 0:e.width)||0),s=Math.max(i.height+e.padding,(null==e?void 0:e.height)||0),o=n.insert("rect",":first-child");return o.attr("class","text").attr("style",l).attr("rx",0).attr("ry",0).attr("x",-r/2).attr("y",-s/2).attr("width",r).attr("height",s),tl(e,o),e.intersect=function(t){return tN.rect(e,t)},n}(0,r.__name)(ex,"question"),(0,r.__name)(ew,"rect_left_inv_arrow"),(0,r.__name)(eb,"rectWithTitle"),(0,r.__name)(ev,"roundedRect"),(0,r.__name)(ek,"shadedProcess"),(0,r.__name)(eM,"slopedRect"),(0,r.__name)(e_,"squareRect"),(0,r.__name)(eS,"stadium"),(0,r.__name)(eD,"state"),(0,r.__name)(eC,"stateEnd"),(0,r.__name)(eA,"stateStart"),(0,r.__name)(eP,"subroutine"),(0,r.__name)(eL,"taggedRect"),(0,r.__name)(eB,"taggedWaveEdgedRectangle"),(0,r.__name)(eN,"text");var eT=(0,r.__name)((t,e,a,l,n,i)=>"M".concat(t,",").concat(e,"\n    a").concat(n,",").concat(i," 0,0,1 ",0,",").concat(-l,"\n    l").concat(a,",",0,"\n    a").concat(n,",").concat(i," 0,0,1 ",0,",").concat(l,"\n    M").concat(a,",").concat(-l,"\n    a").concat(n,",").concat(i," 0,0,0 ",0,",").concat(l,"\n    l").concat(-a,",",0),"createCylinderPathD"),eR=(0,r.__name)((t,e,a,l,n,i)=>["M".concat(t,",").concat(e),"M".concat(t+a,",").concat(e),"a".concat(n,",").concat(i," 0,0,0 ",0,",").concat(-l),"l".concat(-a,",0"),"a".concat(n,",").concat(i," 0,0,0 ",0,",").concat(l),"l".concat(a,",0")].join(" "),"createOuterCylinderPathD"),eI=(0,r.__name)((t,e,a,l,n,i)=>["M".concat(t+a/2,",").concat(-l/2),"a".concat(n,",").concat(i," 0,0,0 0,").concat(l)].join(" "),"createInnerCylinderPathD");async function eO(t,e){var a,l;let n,{labelStyles:r,nodeStyles:s}=tm(e);e.labelStyle=r;let{shapeSvg:o,bbox:h,label:c,halfPadding:d}=await te(t,e,tn(e)),u="neo"===e.look?2*d:d,g=h.height+u,f=g/2,p=f/(2.5+g/50),y=h.width+p+u,{cssStyles:m}=e;if("handDrawn"===e.look){let t=tt.svg(o),a=eR(0,0,y,g,p,f),l=eI(0,0,y,g,p,f),i=t.path(a,tx(e,{})),r=t.path(l,tx(e,{fill:"none"}));n=o.insert(()=>r,":first-child"),(n=o.insert(()=>i,":first-child")).attr("class","basic label-container"),m&&n.attr("style",m)}else{let t=eT(0,0,y,g,p,f);(n=o.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,i.handleUndefinedAttr)(m)).attr("style",s)).attr("class","basic label-container"),m&&n.selectAll("path").attr("style",m),s&&n.selectAll("path").attr("style",s)}return n.attr("label-offset-x",p),n.attr("transform","translate(".concat(-y/2,", ").concat(g/2," )")),c.attr("transform","translate(".concat(-(h.width/2)-p-(h.x-(null!=(a=h.left)?a:0)),", ").concat(-(h.height/2)-(h.y-(null!=(l=h.top)?l:0)),")")),tl(e,n),e.intersect=function(t){var a,l,n,i,r,s;let o=tN.rect(e,t),h=o.y-(null!=(a=e.y)?a:0);if(0!=f&&(Math.abs(h)<(null!=(l=e.height)?l:0)/2||Math.abs(h)==(null!=(n=e.height)?n:0)/2&&Math.abs(o.x-(null!=(i=e.x)?i:0))>(null!=(r=e.width)?r:0)/2-p)){let a=p*p*(1-h*h/(f*f));0!=a&&(a=Math.sqrt(Math.abs(a))),a=p-a,t.x-(null!=(s=e.x)?s:0)>0&&(a=-a),o.x+=a}return o},o}async function eW(t,e){let a,{labelStyles:l,nodeStyles:n}=tm(e);e.labelStyle=l;let{shapeSvg:i,bbox:r}=await te(t,e,tn(e)),s=r.width+e.padding,o=r.height+e.padding,h=[{x:-3*o/6,y:0},{x:s+3*o/6,y:0},{x:s,y:-o},{x:0,y:-o}],{cssStyles:c}=e;if("handDrawn"===e.look){let t=tt.svg(i),l=tx(e,{}),n=ti(h),r=t.path(n,l);a=i.insert(()=>r,":first-child").attr("transform","translate(".concat(-s/2,", ").concat(o/2,")")),c&&a.attr("style",c)}else a=tO(i,s,o,h);return n&&a.attr("style",n),e.width=s,e.height=o,tl(e,a),e.intersect=function(t){return tN.polygon(e,h,t)},i}async function eE(t,e){var a,l,n,i;let{labelStyles:r,nodeStyles:s}=tm(e);e.labelStyle=r;let{shapeSvg:o,bbox:h}=await te(t,e,tn(e)),c=Math.max(60,h.width+(null!=(a=e.padding)?a:0)*2,null!=(l=null==e?void 0:e.width)?l:0),d=Math.max(20,h.height+(null!=(n=e.padding)?n:0)*2,null!=(i=null==e?void 0:e.height)?i:0),{cssStyles:u}=e,g=tt.svg(o),f=tx(e,{});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let p=[{x:-c/2*.8,y:-d/2},{x:c/2*.8,y:-d/2},{x:c/2,y:-d/2*.6},{x:c/2,y:d/2},{x:-c/2,y:d/2},{x:-c/2,y:-d/2*.6}],y=ti(p),m=g.path(y,f),x=o.insert(()=>m,":first-child");return x.attr("class","basic label-container"),u&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",u),s&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",s),tl(e,x),e.intersect=function(t){return tN.polygon(e,p,t)},o}async function ej(t,e){var a,l,n,i,s;let{labelStyles:o,nodeStyles:h}=tm(e);e.labelStyle=o;let{shapeSvg:c,bbox:d,label:u}=await te(t,e,tn(e)),g=(0,r.evaluate)(null==(a=(0,r.getConfig2)().flowchart)?void 0:a.htmlLabels),f=d.width+(null!=(l=e.padding)?l:0),p=f+d.height,y=f+d.height,m=[{x:0,y:0},{x:y,y:0},{x:y/2,y:-p}],{cssStyles:x}=e,w=tt.svg(c),b=tx(e,{});"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");let v=ti(m),k=w.path(v,b),M=c.insert(()=>k,":first-child").attr("transform","translate(".concat(-p/2,", ").concat(p/2,")"));return x&&"handDrawn"!==e.look&&M.selectChildren("path").attr("style",x),h&&"handDrawn"!==e.look&&M.selectChildren("path").attr("style",h),e.width=f,e.height=p,tl(e,M),u.attr("transform","translate(".concat(-d.width/2-(d.x-(null!=(n=d.left)?n:0)),", ").concat(p/2-(d.height+(null!=(i=e.padding)?i:0)/(g?2:1)-(d.y-(null!=(s=d.top)?s:0))),")")),e.intersect=function(t){return r.log.info("Triangle intersect",e,m,t),tN.polygon(e,m,t)},c}async function ez(t,e){var a,l,n,i,r,s,o,h;let{labelStyles:c,nodeStyles:d}=tm(e);e.labelStyle=c;let{shapeSvg:u,bbox:g,label:f}=await te(t,e,tn(e)),p=Math.max(g.width+(null!=(a=e.padding)?a:0)*2,null!=(l=null==e?void 0:e.width)?l:0),y=Math.max(g.height+(null!=(n=e.padding)?n:0)*2,null!=(i=null==e?void 0:e.height)?i:0),m=y/8,x=y+m,{cssStyles:w}=e,b=70-p,v=b>0?b/2:0,k=tt.svg(u),M=tx(e,{});"handDrawn"!==e.look&&(M.roughness=0,M.fillStyle="solid");let _=[{x:-p/2-v,y:x/2},...tr(-p/2-v,x/2,p/2+v,x/2,m,.8),{x:p/2+v,y:-x/2},{x:-p/2-v,y:-x/2}],S=ti(_),D=k.path(S,M),C=u.insert(()=>D,":first-child");return C.attr("class","basic label-container"),w&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",w),d&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",d),C.attr("transform","translate(0,".concat(-m/2,")")),f.attr("transform","translate(".concat(-p/2+(null!=(r=e.padding)?r:0)-(g.x-(null!=(s=g.left)?s:0)),",").concat(-y/2+(null!=(o=e.padding)?o:0)-m-(g.y-(null!=(h=g.top)?h:0)),")")),tl(e,C),e.intersect=function(t){return tN.polygon(e,_,t)},u}async function eH(t,e){var a,l,n,i;let{labelStyles:r,nodeStyles:s}=tm(e);e.labelStyle=r;let{shapeSvg:o,bbox:h}=await te(t,e,tn(e)),c=Math.max(h.width+(null!=(a=e.padding)?a:0)*2,null!=(l=null==e?void 0:e.width)?l:0),d=Math.max(h.height+(null!=(n=e.padding)?n:0)*2,null!=(i=null==e?void 0:e.height)?i:0),u=c/d,g=c,f=d;g>f*u?f=g/u:g=f*u,g=Math.max(g,100);let p=Math.min(.2*(f=Math.max(f,50)),f/4),y=f+2*p,{cssStyles:m}=e,x=tt.svg(o),w=tx(e,{});"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid");let b=[{x:-g/2,y:y/2},...tr(-g/2,y/2,g/2,y/2,p,1),{x:g/2,y:-y/2},...tr(g/2,-y/2,-g/2,-y/2,p,-1)],v=ti(b),k=x.path(v,w),M=o.insert(()=>k,":first-child");return M.attr("class","basic label-container"),m&&"handDrawn"!==e.look&&M.selectAll("path").attr("style",m),s&&"handDrawn"!==e.look&&M.selectAll("path").attr("style",s),tl(e,M),e.intersect=function(t){return tN.polygon(e,b,t)},o}async function eq(t,e){var a,l,n,i,r,s;let{labelStyles:o,nodeStyles:h}=tm(e);e.labelStyle=o;let{shapeSvg:c,bbox:d,label:u}=await te(t,e,tn(e)),g=Math.max(d.width+(null!=(a=e.padding)?a:0)*2,null!=(l=null==e?void 0:e.width)?l:0),f=Math.max(d.height+(null!=(n=e.padding)?n:0)*2,null!=(i=null==e?void 0:e.height)?i:0),p=-g/2,y=-f/2,{cssStyles:m}=e,x=tt.svg(c),w=tx(e,{}),b=[{x:p-5,y:y-5},{x:p-5,y:y+f},{x:p+g,y:y+f},{x:p+g,y:y-5}],v="M".concat(p-5,",").concat(y-5," L").concat(p+g,",").concat(y-5," L").concat(p+g,",").concat(y+f," L").concat(p-5,",").concat(y+f," L").concat(p-5,",").concat(y-5,"\n                M").concat(p-5,",").concat(y," L").concat(p+g,",").concat(y,"\n                M").concat(p,",").concat(y-5," L").concat(p,",").concat(y+f);"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid");let k=x.path(v,w),M=c.insert(()=>k,":first-child");return M.attr("transform","translate(".concat(2.5,", ").concat(2.5,")")),M.attr("class","basic label-container"),m&&"handDrawn"!==e.look&&M.selectAll("path").attr("style",m),h&&"handDrawn"!==e.look&&M.selectAll("path").attr("style",h),u.attr("transform","translate(".concat(-(d.width/2)+2.5-(d.x-(null!=(r=d.left)?r:0)),", ").concat(-(d.height/2)+2.5-(d.y-(null!=(s=d.top)?s:0)),")")),tl(e,M),e.intersect=function(t){return tN.polygon(e,b,t)},c}async function eF(t,e){var a,l,n,o,h,c;if(e.alias&&(e.label=e.alias),"handDrawn"===e.look){let{themeVariables:a}=(0,r.getConfig)(),{background:l}=a,n={...e,id:e.id+"-background",look:"default",cssStyles:["stroke: none","fill: ".concat(l)]};await eF(t,n)}let d=(0,r.getConfig)();e.useHtmlLabels=d.htmlLabels;let u=null!=(n=null==(a=d.er)?void 0:a.diagramPadding)?n:10,g=null!=(o=null==(l=d.er)?void 0:l.entityPadding)?o:6,{cssStyles:f}=e,{labelStyles:p}=tm(e);if(0===e.attributes.length&&e.label){let a={rx:0,ry:0,labelPaddingX:u,labelPaddingY:1.5*u,classes:""};(0,i.calculateTextWidth)(e.label,d)+2*a.labelPaddingX<d.er.minEntityWidth&&(e.width=d.er.minEntityWidth);let l=await en(t,e,a);if(!(0,r.evaluate)(d.htmlLabels)){let t=l.select("text"),e=null==(h=t.node())?void 0:h.getBBox();t.attr("transform","translate(".concat(-e.width/2,", 0)"))}return l}d.htmlLabels||(u*=1.25,g*=1.25);let y=tn(e);y||(y="node default");let m=t.insert("g").attr("class",y).attr("id",e.domId||e.id),x=await eG(m,null!=(c=e.label)?c:"",d,0,0,["name"],p);x.height+=g;let w=0,b=[],v=0,k=0,M=0,_=0,S=!0,D=!0;for(let t of e.attributes){let e=await eG(m,t.type,d,0,w,["attribute-type"],p);v=Math.max(v,e.width+u);let a=await eG(m,t.name,d,0,w,["attribute-name"],p);k=Math.max(k,a.width+u);let l=await eG(m,t.keys.join(),d,0,w,["attribute-keys"],p);M=Math.max(M,l.width+u);let n=await eG(m,t.comment,d,0,w,["attribute-comment"],p);_=Math.max(_,n.width+u),w+=Math.max(e.height,a.height,l.height,n.height)+g,b.push(w)}b.pop();let C=4;M<=u&&(S=!1,M=0,C--),_<=u&&(D=!1,_=0,C--);let A=m.node().getBBox();if(x.width+2*u-(v+k+M+_)>0){let t=x.width+2*u-(v+k+M+_);v+=t/C,k+=t/C,M>0&&(M+=t/C),_>0&&(_+=t/C)}let P=v+k+M+_,L=tt.svg(m),B=tx(e,{});"handDrawn"!==e.look&&(B.roughness=0,B.fillStyle="solid");let N=Math.max(A.width+2*u,(null==e?void 0:e.width)||0,P),T=Math.max(A.height+(b[0]||w)+g,(null==e?void 0:e.height)||0),R=-N/2,I=-T/2;m.selectAll("g:not(:first-child)").each((t,e,a)=>{let l=(0,s.select)(a[e]),n=l.attr("transform"),i=0,r=0;if(n){let t=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(n);t&&(i=parseFloat(t[1]),r=parseFloat(t[2]),l.attr("class").includes("attribute-name")?i+=v:l.attr("class").includes("attribute-keys")?i+=v+k:l.attr("class").includes("attribute-comment")&&(i+=v+k+M))}l.attr("transform","translate(".concat(R+u/2+i,", ").concat(r+I+x.height+g/2,")"))}),m.select(".name").attr("transform","translate("+-x.width/2+", "+(I+g/2)+")");let O=L.rectangle(R,I,N,T,B),W=m.insert(()=>O,":first-child").attr("style",f.join("")),{themeVariables:E}=(0,r.getConfig)(),{rowEven:j,rowOdd:z,nodeBorder:H}=E;for(let[t,e]of(b.push(0),b.entries())){if(0===t&&b.length>1)continue;let a=t%2==0&&0!==e,l=L.rectangle(R,x.height+I+e,N,x.height,{...B,fill:a?j:z,stroke:H});m.insert(()=>l,"g.label").attr("style",f.join("")).attr("class","row-rect-".concat(t%2==0?"even":"odd"))}let q=L.line(R,x.height+I,N+R,x.height+I,B);for(let t of(m.insert(()=>q).attr("class","divider"),q=L.line(v+R,x.height+I,v+R,T+I,B),m.insert(()=>q).attr("class","divider"),S&&(q=L.line(v+k+R,x.height+I,v+k+R,T+I,B),m.insert(()=>q).attr("class","divider")),D&&(q=L.line(v+k+M+R,x.height+I,v+k+M+R,T+I,B),m.insert(()=>q).attr("class","divider")),b))q=L.line(R,x.height+I+t,N+R,x.height+I+t,B),m.insert(()=>q).attr("class","divider");return tl(e,W),e.intersect=function(t){return tN.rect(e,t)},m}async function eG(t,e,a){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",d=t.insert("g").attr("class","label ".concat(h.join(" "))).attr("transform","translate(".concat(l,", ").concat(o,")")).attr("style",c);e!==(0,r.parseGenericTypes)(e)&&(e=(e=(0,r.parseGenericTypes)(e)).replaceAll("<","&lt;").replaceAll(">","&gt;"));let u=d.node().appendChild(await (0,n.createText)(d,e,{width:(0,i.calculateTextWidth)(e,a)+100,style:c,useHtmlLabels:a.htmlLabels},a));if(e.includes("&lt;")||e.includes("&gt;")){let t=u.children[0];for(t.textContent=t.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");t.childNodes[0];)(t=t.childNodes[0]).textContent=t.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let g=u.getBBox();if((0,r.evaluate)(a.htmlLabels)){let t=u.children[0];t.style.textAlign="start";let e=(0,s.select)(u);g=t.getBoundingClientRect(),e.attr("width",g.width),e.attr("height",g.height)}return g}async function eV(t,a,l,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null!=(e=l.class.padding)?e:12,r=3*!n,s=t.insert("g").attr("class",tn(a)).attr("id",a.domId||a.id),o=null,h=null,c=null,d=null,u=0,g=0,f=0;if(o=s.insert("g").attr("class","annotation-group text"),a.annotations.length>0){let t=a.annotations[0];await eU(o,{text:"".concat(t,"")},0),u=o.node().getBBox().height}h=s.insert("g").attr("class","label-group text"),await eU(h,a,0,["font-weight: bolder"]);let p=h.node().getBBox();g=p.height,c=s.insert("g").attr("class","members-group text");let y=0;for(let t of a.members){let e=await eU(c,t,y,[t.parseClassifier()]);y+=e+r}(f=c.node().getBBox().height)<=0&&(f=i/2),d=s.insert("g").attr("class","methods-group text");let m=0;for(let t of a.methods){let e=await eU(d,t,m,[t.parseClassifier()]);m+=e+r}let x=s.node().getBBox();if(null!==o){let t=o.node().getBBox();o.attr("transform","translate(".concat(-t.width/2,")"))}return h.attr("transform","translate(".concat(-p.width/2,", ").concat(u,")")),x=s.node().getBBox(),c.attr("transform","translate(".concat(0,", ").concat(u+g+2*i,")")),x=s.node().getBBox(),d.attr("transform","translate(".concat(0,", ").concat(u+g+(f?f+4*i:2*i),")")),x=s.node().getBBox(),{shapeSvg:s,bbox:x}}async function eU(t,e,a){var l;let o,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=t.insert("g").attr("class","label").attr("style",h.join("; ")),d=(0,r.getConfig)(),u="useHtmlLabels"in e?e.useHtmlLabels:null==(l=(0,r.evaluate)(d.htmlLabels))||l,g="";g="text"in e?e.text:e.label,!u&&g.startsWith("\\")&&(g=g.substring(1)),(0,r.hasKatex)(g)&&(u=!0);let f=await (0,n.createText)(c,(0,r.sanitizeText2)((0,i.decodeEntities)(g)),{width:(0,i.calculateTextWidth)(g,d)+50,classes:"markdown-node-label",useHtmlLabels:u},d),p=1;if(u){let t=f.children[0],e=(0,s.select)(f);p=t.innerHTML.split("<br>").length,t.innerHTML.includes("</math>")&&(p+=t.innerHTML.split("<mrow>").length-1);let a=t.getElementsByTagName("img");if(a){let t=""===g.replace(/<img[^>]*>/g,"").trim();await Promise.all([...a].map(e=>new Promise(a=>{function l(){if(e.style.display="flex",e.style.flexDirection="column",t){var l,n;let t=5*parseInt(null!=(n=null==(l=d.fontSize)?void 0:l.toString())?n:window.getComputedStyle(document.body).fontSize,10)+"px";e.style.minWidth=t,e.style.maxWidth=t}else e.style.width="100%";a(e)}(0,r.__name)(l,"setupImage"),setTimeout(()=>{e.complete&&l()}),e.addEventListener("error",l),e.addEventListener("load",l)})))}o=t.getBoundingClientRect(),e.attr("width",o.width),e.attr("height",o.height)}else{h.includes("font-weight: bolder")&&(0,s.select)(f).selectAll("tspan").attr("font-weight",""),p=f.children.length;let t=f.children[0];(""===f.textContent||f.textContent.includes("&gt"))&&(t.textContent=g[0]+g.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim()," "===g[1]&&(t.textContent=t.textContent[0]+" "+t.textContent.substring(1))),"undefined"===t.textContent&&(t.textContent=""),o=f.getBBox()}return c.attr("transform","translate(0,"+(-o.height/(2*p)+a)+")"),o.height}async function eZ(t,e){var a,l,n,i,o,h,c,d;let u=(0,r.getConfig2)(),g=null!=(n=u.class.padding)?n:12,f=null==(o=null!=(i=e.useHtmlLabels)?i:(0,r.evaluate)(u.htmlLabels))||o;e.annotations=null!=(h=e.annotations)?h:[],e.members=null!=(c=e.members)?c:[],e.methods=null!=(d=e.methods)?d:[];let{shapeSvg:p,bbox:y}=await eV(t,e,u,f,g),{labelStyles:m,nodeStyles:x}=tm(e);e.labelStyle=m,e.cssStyles=e.styles||"";let w=(null==(a=e.styles)?void 0:a.join(";"))||x||"";e.cssStyles||(e.cssStyles=w.replaceAll("!important","").split(";"));let b=0===e.members.length&&0===e.methods.length&&!(null==(l=u.class)?void 0:l.hideEmptyMembersBox),v=tt.svg(p),k=tx(e,{});"handDrawn"!==e.look&&(k.roughness=0,k.fillStyle="solid");let M=y.width,_=y.height;0===e.members.length&&0===e.methods.length?_+=g:e.members.length>0&&0===e.methods.length&&(_+=2*g);let S=-M/2,D=-_/2,C=v.rectangle(S-g,D-g-(b?g:0===e.members.length&&0===e.methods.length?-g/2:0),M+2*g,_+2*g+(b?2*g:0===e.members.length&&0===e.methods.length?-g:0),k),A=p.insert(()=>C,":first-child");A.attr("class","basic label-container");let P=A.node().getBBox();p.selectAll(".text").each((t,a,l)=>{let n=(0,s.select)(l[a]),i=n.attr("transform"),r=0;if(i){let t=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(i);t&&(r=parseFloat(t[2]))}let o=r+D+g-(b?g:0===e.members.length&&0===e.methods.length?-g/2:0);f||(o-=4);let h=S;if(n.attr("class").includes("label-group")||n.attr("class").includes("annotation-group")){var c;h=-(null==(c=n.node())?void 0:c.getBBox().width)/2||0,p.selectAll("text").each(function(t,e,a){"middle"===window.getComputedStyle(a[e]).textAnchor&&(h=0)})}n.attr("transform","translate(".concat(h,", ").concat(o,")"))});let L=p.select(".annotation-group").node().getBBox().height-(b?g/2:0)||0,B=p.select(".label-group").node().getBBox().height-(b?g/2:0)||0,N=p.select(".members-group").node().getBBox().height-(b?g/2:0)||0;if(e.members.length>0||e.methods.length>0||b){let t=v.line(P.x,L+B+D+g,P.x+P.width,L+B+D+g,k);p.insert(()=>t).attr("class","divider").attr("style",w)}if(b||e.members.length>0||e.methods.length>0){let t=v.line(P.x,L+B+N+D+2*g+g,P.x+P.width,L+B+N+D+g+2*g,k);p.insert(()=>t).attr("class","divider").attr("style",w)}if("handDrawn"!==e.look&&p.selectAll("path").attr("style",w),A.select(":nth-child(2)").attr("style",w),p.selectAll(".divider").select("path").attr("style",w),e.labelStyle?p.selectAll("span").attr("style",e.labelStyle):p.selectAll("span").attr("style",w),!f){let t=RegExp(/color\s*:\s*([^;]*)/),e=t.exec(w);if(e){let t=e[0].replace("color","fill");p.selectAll("tspan").attr("style",t)}else if(m){let e=t.exec(m);if(e){let t=e[0].replace("color","fill");p.selectAll("tspan").attr("style",t)}}}return tl(e,A),e.intersect=function(t){return tN.rect(e,t)},p}async function eX(t,e){var a,l,n,i,r;let o,{labelStyles:h,nodeStyles:c}=tm(e);e.labelStyle=h;let d="verifyMethod"in e,u=tn(e),g=t.insert("g").attr("class",u).attr("id",null!=(n=e.domId)?n:e.id),f=o=d?await eQ(g,"&lt;&lt;".concat(e.type,"&gt;&gt;"),0,e.labelStyle):await eQ(g,"&lt;&lt;Element&gt;&gt;",0,e.labelStyle),p=await eQ(g,e.name,f,e.labelStyle+"; font-weight: bold;");if(f+=p+20,d){let t=await eQ(g,"".concat(e.requirementId?"Id: ".concat(e.requirementId):""),f,e.labelStyle);f+=t;let a=await eQ(g,"".concat(e.text?"Text: ".concat(e.text):""),f,e.labelStyle);f+=a;let l=await eQ(g,"".concat(e.risk?"Risk: ".concat(e.risk):""),f,e.labelStyle);f+=l,await eQ(g,"".concat(e.verifyMethod?"Verification: ".concat(e.verifyMethod):""),f,e.labelStyle)}else{let t=await eQ(g,"".concat(e.type?"Type: ".concat(e.type):""),f,e.labelStyle);f+=t,await eQ(g,"".concat(e.docRef?"Doc Ref: ".concat(e.docRef):""),f,e.labelStyle)}let y=(null!=(i=null==(a=g.node())?void 0:a.getBBox().width)?i:200)+20,m=(null!=(r=null==(l=g.node())?void 0:l.getBBox().height)?r:200)+20,x=-y/2,w=-m/2,b=tt.svg(g),v=tx(e,{});"handDrawn"!==e.look&&(v.roughness=0,v.fillStyle="solid");let k=b.rectangle(x,w,y,m,v),M=g.insert(()=>k,":first-child");if(M.attr("class","basic label-container").attr("style",c),g.selectAll(".label").each((t,e,a)=>{let l=(0,s.select)(a[e]),n=l.attr("transform"),i=0,r=0;if(n){let t=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(n);t&&(i=parseFloat(t[1]),r=parseFloat(t[2]))}let o=r-m/2,h=x+10;(0===e||1===e)&&(h=i),l.attr("transform","translate(".concat(h,", ").concat(o+20,")"))}),f>o+p+20){let t=b.line(x,w+o+p+20,x+y,w+o+p+20,v);g.insert(()=>t).attr("style",c)}return tl(e,M),e.intersect=function(t){return tN.rect(e,t)},g}async function eQ(t,e,a){var l;let o,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(""===e)return 0;let c=t.insert("g").attr("class","label").attr("style",h),d=(0,r.getConfig2)(),u=null==(l=d.htmlLabels)||l,g=await (0,n.createText)(c,(0,r.sanitizeText2)((0,i.decodeEntities)(e)),{width:(0,i.calculateTextWidth)(e,d)+50,classes:"markdown-node-label",useHtmlLabels:u,style:h},d);if(u){let t=g.children[0],e=(0,s.select)(g);o=t.getBoundingClientRect(),e.attr("width",o.width),e.attr("height",o.height)}else{for(let t of g.children[0].children)t.textContent=t.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),h&&t.setAttribute("style",h);o=g.getBBox(),o.height+=6}return c.attr("transform","translate(".concat(-o.width/2,",").concat(-o.height/2+a,")")),o.height}(0,r.__name)(eO,"tiltedCylinder"),(0,r.__name)(eW,"trapezoid"),(0,r.__name)(eE,"trapezoidalPentagon"),(0,r.__name)(ej,"triangle"),(0,r.__name)(ez,"waveEdgedRectangle"),(0,r.__name)(eH,"waveRectangle"),(0,r.__name)(eq,"windowPane"),(0,r.__name)(eF,"erBox"),(0,r.__name)(eG,"addText"),(0,r.__name)(eV,"textHelper"),(0,r.__name)(eU,"addText"),(0,r.__name)(eZ,"classBox"),(0,r.__name)(eX,"requirementBox"),(0,r.__name)(eQ,"addText");var eY=(0,r.__name)(t=>{switch(t){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function eJ(t,e,a){var l,n,i;let r,s,o,h,{config:c}=a,{labelStyles:d,nodeStyles:u}=tm(e);e.labelStyle=d||"";let g=e.width;e.width=(null!=(n=e.width)?n:200)-10;let{shapeSvg:f,bbox:p,label:y}=await te(t,e,tn(e)),m=e.padding||10,x="";"ticket"in e&&e.ticket&&(null==c||null==(l=c.kanban)?void 0:l.ticketBaseUrl)&&(x=null==c||null==(i=c.kanban)?void 0:i.ticketBaseUrl.replace("#TICKET#",e.ticket),r=f.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",x).attr("target","_blank"));let w={useHtmlLabels:e.useHtmlLabels,labelStyle:e.labelStyle||"",width:e.width,img:e.img,padding:e.padding||8,centerLabel:!1};r?{label:s,bbox:o}=await ta(r,"ticket"in e&&e.ticket||"",w):{label:s,bbox:o}=await ta(f,"ticket"in e&&e.ticket||"",w);let{label:b,bbox:v}=await ta(f,"assigned"in e&&e.assigned||"",w);e.width=g;let k=(null==e?void 0:e.width)||0,M=Math.max(o.height,v.height)/2,_=Math.max(p.height+20,(null==e?void 0:e.height)||0)+M,S=-k/2,D=-_/2;y.attr("transform","translate("+(m-k/2)+", "+(-M-p.height/2)+")"),s.attr("transform","translate("+(m-k/2)+", "+(-M+p.height/2)+")"),b.attr("transform","translate("+(m+k/2-v.width-20)+", "+(-M+p.height/2)+")");let{rx:C,ry:A}=e,{cssStyles:P}=e;if("handDrawn"===e.look){let t=tt.svg(f),a=tx(e,{}),l=C||A?t.path(tu(S,D,k,_,C||0),a):t.rectangle(S,D,k,_,a);(h=f.insert(()=>l,":first-child")).attr("class","basic label-container").attr("style",P||null)}else{(h=f.insert("rect",":first-child")).attr("class","basic label-container __APA__").attr("style",u).attr("rx",null!=C?C:5).attr("ry",null!=A?A:5).attr("x",S).attr("y",D).attr("width",k).attr("height",_);let t="priority"in e&&e.priority;if(t){let e=f.append("line"),a=S+2,l=D+Math.floor((null!=C?C:0)/2),n=D+_-Math.floor((null!=C?C:0)/2);e.attr("x1",a).attr("y1",l).attr("x2",a).attr("y2",n).attr("stroke-width","4").attr("stroke",eY(t))}}return tl(e,h),e.height=_,e.intersect=function(t){return tN.rect(e,t)},f}(0,r.__name)(eJ,"kanbanItem");var eK=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:e_},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:ev},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:eS},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:eP},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:tK},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:tj},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:ex},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:t8},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:es},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:er},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:eW},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:el},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:t0},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:eN},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:tW},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:ek},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:eA},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:eC},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:t5},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:t9},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:tF},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:tV},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:tZ},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:eo},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:ez},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:t3},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:eO},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:eu},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:tX},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:t$},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:ej},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:eq},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:t2},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:eE},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:t1},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:eM},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:ep},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:ef},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:tI},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:tH},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:eB},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:eL},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:eH},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:ew},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:eg}],e$=(0,r.__name)(()=>Object.fromEntries([...Object.entries({state:eD,choice:tE,note:ey,rectWithTitle:eb,labelRect:ei,iconSquare:ee,iconCircle:t7,icon:t6,iconRounded:et,imageSquare:ea,anchor:tT,kanbanItem:eJ,classBox:eZ,erBox:eF,requirementBox:eX}),...eK.flatMap(t=>[t.shortName,..."aliases"in t?t.aliases:[],..."internalAliases"in t?t.internalAliases:[]].map(e=>[e,t.handler]))]),"generateShapeMap")();function e0(t){return t in e$}(0,r.__name)(e0,"isValidShape");var e2=new Map;async function e1(t,e,a){let l,n;"rect"===e.shape&&(e.rx&&e.ry?e.shape="roundedRect":e.shape="squareRect");let i=e.shape?e$[e.shape]:void 0;if(!i)throw Error("No such shape: ".concat(e.shape,". Please check your syntax."));if(e.link){let r;"sandbox"===a.config.securityLevel?r="_top":e.linkTarget&&(r=e.linkTarget||"_blank"),l=t.insert("svg:a").attr("xlink:href",e.link).attr("target",null!=r?r:null),n=await i(l,e,a)}else l=n=await i(t,e,a);return e.tooltip&&n.attr("title",e.tooltip),e2.set(e.id,l),e.haveCallback&&l.attr("class",l.attr("class")+" clickable"),l}(0,r.__name)(e1,"insertNode");var e5=(0,r.__name)((t,e)=>{e2.set(e.id,t)},"setNodeElem"),e3=(0,r.__name)(()=>{e2.clear()},"clear"),e4=(0,r.__name)(t=>{let e=e2.get(t.id);r.log.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");let a=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+a-t.width/2)+", "+(t.y-t.height/2-8)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),a},"positionNode")}]);
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="e03ba728-2d2c-5052-b1ca-eccd42f625fd")}catch(e){}}();
//# debugId=e03ba728-2d2c-5052-b1ca-eccd42f625fd
